# 灯具进销存需求规格说明文档 V1.0
## 1. 引言

### 1.1 目的
本文档描述了灯具进销存系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。<br/>
除特殊说明之外，本文档所包含的需求都是高优先级需求。

### 1.2 范围
本系统是为×××民营灯具企业开发的进销存业务系统，开发的目标是用于帮助该商店处理日常的重点业务，包括商品管理、客户管理、进货、销售、付款、收款等。<br/>
通过本系统的应用，期望为×××民营灯具企业系统上线运行六个月后，减少挤压库存，增加销售额，提高财务人员工作效率，为经理的决策做支持。

### 1.3 参考文献
1. IEEE标准文档
2. 灯具进销存系统用例文档 V1.0

## 2. 总体描述

### 2.1商品前景

### 2.1.1背景与机遇
XXX民营企业专业从事灯具照明行业，是某灯具的南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作，服务对象包括项目业主、施工单位、分销商、设计院、终端用户等。<br/>
由于其业务规模的扩大，其原先使用的系统已经不适应其业务发展需求。首先是因公司规模扩大，雇员增多，公司工作效率和管理效率降低；其次，由于库存量增大，原有系统无法及时处理库存，使得库存挤压现象严重；再次，企业面临的竞争更加激烈，原有系统无法给公司决策人员提供良好的决策支持。<br/>
灯具进销存系统就是为满足XXX民营灯具企业新的业务发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成日常任务，客户端与数据集中服务器采用实时通信的方式完成数据交换。<br/>

### 2.1.2 业务需求
BR1：在系统使用6个月后，商品积压、缺货和报废的现象要减少50%<br/>
BR2：在系统使用6个月后，销售人员销售总额提高30%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最好情况： 50%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最可能情况：30%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最坏情况：10%<br/>
BR3：在系统使用6个月后，财务人员的工作效率要提高50%<br/>
BR4：在系统使用6个月后，用户满意度要提高25%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;度量：客户好评率的提升幅度<br/>
BR5：在系统使用6个月后，能为经理在公司发展上提供误差不大于20%的决策方案<br/>

### 2.2 商品功能
SF1：分析商品库存，发现可能的商品积压、缺货和报废现象<br/>
SF2：根据市场变化调整销售的商品<br/>
SF3：制定促销手段，处理积压商品<br/>
SF4：进行商品促销和商品赠送<br/>
SF5：掌握员工变动和授权情况<br/>
SF6：处理商品入库与出库<br/>
SF7：发展会员，提高顾客回头率<br/>
SF8：允许积分兑换商品和赠送吸引会员的礼品，提高会员满意度<br/>
SF9：帮助销售人员处理销售与退货任务<br/>
SF10：分析销售情况，为总经理提供决策支持。<br/>
SF11：为财务人员提供各种财务单据和报表<br/>

### 2.3 用户特征
用户 | 基本特征
---|---
销售人员| 共有4～8个销售人员，他们每天都要完成大量的销售任务，预估计在顾客流量较大的节假日，他们平均每分钟至少要销售5件商品。他们每天还要多次中断销售处理退货，可能一次退回单个商品，更可能是一次退回多个商品。<br/>因为任务较为频繁，而且涉及钱财事宜，所以他们对软件系统的依赖很大，希望新系统要尽可能帮他们解决问题。
库存管理人员|共有1～2个库存管理人员。他们每天都要一次进行商品库存分析，3～4天进行一次十几种到几十种新购入商品入库，每周1～2次淘汰报废商品，每月多次将损坏或者劣质商品销库。他们还需要对商品进行分类和管理，并根据实际情况处理各类单据。
总经理 | 共有2个总经理。他主要负责审批各类单据和制定经营策略。每个月都会有几个生产厂家针对自己的商品提出赠送或特价促销请求。每次换季时节，都会有几十种商品有积压风险，总经理要通过为这些商品制定赠送或特价促销策略，来及时处理这些商品。每个月也都会有几个销售不佳的商品会存在保质期过期危险，所以总经理也要为它们制定促销策略。在每年的几个重要节日，总经理要制定促进策略，以与其他商家竞争，通常使用总额特价策略和总额赠送策略。<br/>总经理要管理店内所有的商品，同时还要负责店内的各种日常管理事务，所以工作繁忙，希望新系统不要太多地浪费他们的时间。
管理员 | 整个系统有1个系统管理员，他的工作是每月几次处理员工雇佣、离职与职位变换。离职和职位变换通常是单个员工行为。系统管理员是计算机专业维护人员，计算机技能很好。
财务人员 |财务人员共1～2名，负责制作各类财务报表，并整理和统计公司的各类财务情况。他们还负责公司的期初建账工作和账户管理，故而希望系统能给他们带来更为便捷的操作模板，提高他们的工作效率。

### 2.4 约束
CON1: 系统使用图形界面。<br/>
CON2: 项目要使用持续集成方法进行开发。<br/>
CON3: 在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告。<br/>
CON4: 采用Java语言开发。<br/>
CON5: 用户远程使用系统。<br/>
CON6: 项目开发要严格按照计划执行<br/>

### 2.5 假设和依赖
AE1：在将上一批入库商品出库90%之前，下一批商品不会被入库；<br/>
AE2：新一批商品的每天出库量与上一批商品的每天出库量基本相同，商品出库情况比较稳定；<br/>
AE3：一个额度的赠送促销会自动包含所有比它小的额度的促销赠送商品<br/>
AE4: 所有使用者对自身业务足够熟悉，不会因人为原因造成工作（单据审批、出库入库等）的积压。<br/>
AE5: 销售人员分为销售员和销售经理。销售员最多折让1000元，销售经理可以折让5000元，总经理可以任意金额的折让。<br/>

# 3 详细需求描述

## 3.1 对外接口需求

### 3.1.1 用户界面
界面风格：<br/> 本系统采用图形化用户界面，界面风格简洁，操作方便，支持用户用鼠标和键盘进行操作，具体考虑实现扁平化界面，包括Windows通用图形界面，以及更多地使用look&feel进行界面定制。
界面布局：<br/> 界面布局整齐合理，清爽易用。
示例：（见同目录下的png图片附件）

### 3.1.2 硬件接口
无

### 3.1.2 软件接口
数据使用Derby(Java DB)数据库进行保存，需要机器具有jre。

### 3.1.4 通信接口
客户端与服务器使用RMI进行通信。

## 3.2 功能需求

### 3.2.7 商品管理 ###

#### 3.2.7.1 特性描述 ####
库存管理人员根据实际情况对库存商品进行属性初始化、增加商品、修改商品、删除商品、查找商品等具体操作。
如果操作对原有的库存信息进行了修改，则对库存信息进行更新。
<br>优先级=高

#### 3.2.7.2 刺激/响应序列 ####
刺激：库存管理人员输入要新增的商品名称  
响应：系统查找是否存在同名商品，若不存在，则自动创建该商品并初始化该商品属性。  
刺激：库存管理员输入新商品的编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价。  
响应：系统更新商品属性为修改过的值  
刺激：库存管理员输入要查找的商品名称或商品编号  
响应：系统显示所有包含该信息的商品。  
刺激：库存管理员选中并删除某商品  
响应：系统将该商品从商品列表中清除（惰性删除）  
刺激：库存管理员选中并修改某商品的信息  
响应：系统将商品信息更新为修改后的值

#### 3.2.7.3 相关功能需求 ####

方法名|交互过程
---|---
|Goods.New.Initialize|系统在某个商品被创建后，自动按类别对其所有属性初始化。
|Goods.New.Input|系统应该允许库存管理人员在新建商品时进行键盘输入。
|Goods.New.Check|系统应该在库存管理员输入要新建的商品后，检查其是否已存在。
|Goods.New.Refresh|系统在商品新建时，允许库存管理人员手动对商品的各项属性进行初始赋值。
|Goods.New.End|在库存管理人员完成增加商品操作后，系统关闭商品增加任务并更新库存信息。
|Goods.Check.Input|系统应该允许库存管理人员用键盘输入要查找的商品的编号或名称。
|Goods.Check.Info|在库存管理人员输入结束后，系统反馈有关商品的信息。
|Goods.Check.Choose|库存管理人员选中某商品后，系统显示商品各项信息，包括：编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价。
|Goods.Check.Return|库存管理人员结束查找或查看时，系统关闭查找任务。
|Goods.Delete.Delete|在库存管理人员选中某商品并选择删除后，系统将该商品从商品列表清除
|Goods.Delete.End|在库存管理人员结束删除操作后，系统关闭删除任务。
|Goods.Change.Change|在库存管理人员选中并修改商品的某项信息后，系统更新该商品的信息。
|Goods.Change.End|在库存管理人员结束更改操作后，系统关闭更改任务。

<h3>3.2.8  收款</h3>

<h4>3.2.8.1 特性描述</h4>

公司需要收款时，一个经过识别和授权的财务人员开始制定收款单，系统将收款单信息保存并提交

<h4>3.2.8.2 刺激／响应序列</h4>

刺激：财务人员新建收款单  
响应：系统自动生成一个收款单，计算单据编号  
刺激：财务人员输入客户编号  
响应：系统显示客户基本信息  
刺激：财务人员填写转账列表  
响应：系统计算总额  
刺激：财务人员保存单据  
响应：系统保存单据  
刺激：财务人员提交单据  
响应：系统保存单据并提交  

<h4>3.2.8.3 相关功能需求</h4>

编号|需求描述
--|--
Collection.Start.New |系统应允许财务人员新建收款单
Collection.Start.New.Valid|系统今日产生收款单的数量未超出最大额度99999，系统记录单据编号，并生成一个收款单，包含：单据编号，客户，操作员（当前登录用户），转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。
Collection.Start.New.Invalid|系统计算收款单的数量超出最大额度99999，系统提示错误，拒绝生成收款单
|
Collection.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
Collection.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
|
Collection.Input.Save|在财务人员保存收款单时，系统保存单据信息
Collection.Input.Cancel|在财务人员输入取消命令时，系统结束收款任务
|
Collection.Input.Client|在财务人员输入客户名称或编号后，系统填写收款单中的客户，参见Collection.Client
Collection.Client.Start|在销售任务最开始时输入客户编号或名称，系统要允许销售人员进行输入
Collection.Client.NotStart|不是在销售任务最开始时输入客户编号或名称，系统不予处理
Collection.Client.Valid|在销售人员输入系统中已有销售商的客户编号或名称时，系统显示该客户的名称，编号，默认业务员
Collection.Client.Invalid|在销售人员输入的客户编号或名称不存在时，系统提示该客户不存在
|
Collection.Input.TransList|在财务人员选择填写转账列表时，系统显示转账列表,见Collection.TransList
Collection.TransList|系统显示转账列表
Collection.TransList.Account|在财务人员选择银行账户后，系统显示银行账户
Collection.TransList.Amount|在财务人员输入向该账户的转账金额后，系统更新总额
Collection.TransList.Remark|在财务人员输入备注时，系统填写备注
Collection.TransList.Delete|在财务人员删除一条转账信息时，系统删除该条信息并更新总额
|
Collection.Input.Submit|在财务人员提交收款单时，系统处理提交任务，见Collection.Submit
Collection.Submit.Null|如果财务人员未填写转账金额就提交，系统提示提交失败
Collection.Submit.Success|如果财务人员填写了转账金额，系统提示提交成功，并将单据保存，发送给总经理





<h3>3.2.9 销售</h3>
<h4>3.2.9.1 特性描述</h4>
在某个业务员和用户谈成了一笔销售生意后，一个被识别和授权的销售人员开始处理销售，完成商品输入、销售单生成。
<br>优先级=高</br>
<h4>3.2.9.2 刺激/响应序列</h4>
刺激：销售人员新建销售单<br>
响应：计算单据编号，系统自动生成一个销售单<br>
刺激：销售员人员打开草稿单<br>
响应：系统打开草稿单，使之进入编辑状态<br>
刺激：销售人员保存草稿单<br>
响应：系统保存草稿单<br>
刺激：销售人员输入客户编号<br>
响应：系统显示客户编号，查找并显示该客户的默认业务员<br>
刺激：销售人员更改客户的业务员<br>
响应：系统更改销售单中客户的业务员<br>
刺激：销售人员填写仓库<br>
响应：系统显示销售单中仓库<br>
刺激：销售人员要求填写出货商品清单<br>
响应：系统显示商品选择界面<br>
刺激：销售人员从商品选择界面选择商品名称<br>
响应：系统显示商品编号，型号，默认单价<br>
刺激：销售人员删除已输入商品<br>
响应：系统在销售单中删除该商品<br>
刺激：销售人员输入商品数量<br>
响应：系统显示商品数量并计算总金额<br>
刺激：销售人员更改商品单价<br>
响应：系统更改销售单中商品单价并计算总金额<br>
刺激：销售人员输入商品备注<br>
响应：系统显示商品备注<br>
刺激：销售人员结束商品选择<br>
响应：系统关闭商品选择界面<br>
刺激：销售人员输入折让金额，代金劵金额<br>
响应：系统计算总金额<br>
刺激：销售人员输入销售单备注<br>
响应：系统显示销售单备注<br>
刺激：销售人员取消销售任务<br>
响应：系统关闭销售任务<br>
刺激：销售人员提交销售单<br>
响应：系统保存销售单并提交给总经理<br>


<h4>3.2.9.3 相关功能需求</h4>
|      |   |
|-------|---|
|Sale.Start|系统应该允许销售人员新建销售单|
|Sale.Start.Valid|系统今日产生销售单的数量未超出最大额度99999，系统生成一个销售出货单，包括：单据编号（自动计算），客户，业务员（和这个客户打交道的公司员工，可以设置一个客户的默认业务员），操作员（当前登录系统的用户），仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，赠送列表，备注。出货商品清单中的内容暂时为空，包括商品的编号，名称，型号，数量，单价，金额，商品备注。
|Sale.Start.Invalid|系统计算销售单的数量超出最大额度99999，系统提示错误
||
|Sale.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
|Sale.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
||
|Sale.Input|系统应该允许销售人员在销售任务中进行键盘输入
|Sale.Input.Save|在销售人员输入保存草稿单命令时，系统要保存草稿单
|Sale.Input.End|在销售人员输入提交销售单命令时，系统要结束一个销售任务，参见Sale.End
|Sale.Input.Cancel|在销售人员输入取消命令时，系统关闭销售任务不做任何处理
|Sale.Input.SaleItems|在销售人员输入填写商品清单命令时，系统执行商品清单填写任务，参见Sale.SaleItems
|Sale.Input.Client|在销售人员输入客户编号或名称时，系统填写销售单中客户，参见Sale.Client
|Sale.Input.Salesman|在销售人员填写业务员时，系统更改销售单中业务员
|Sale.Input.Remarks|在销售人员填写备注时，系统更改销售单中备注
|Sale.Input.Discount|在销售人员填写折让时，系统执行折让处理任务，参见Sale.Discount
|Sale.Input.Coupon|在销售人员填写使用代金券数额时，系统记录使用代金券数额
|Sale.Input.Invalid|在销售人员输入不符合数据格式（参见3.4.3）时，系统提示输入格式不符
||
|Sale.Client.Start|在销售任务最开始时输入客户编号或名称，系统要允许销售人员进行输入
|Sale.Client.NotStart|不是在销售任务最开始时输入客户编号或名称，系统不予处理
|Sale.Client.Valid|在销售人员输入系统中已有销售商的客户编号或名称时，系统显示该客户的名称，编号，默认业务员
|Sale.Client.Invalid|在销售人员输入的客户编号或名称不存在时，系统提示该客户不存在
|||
|Sale.SaleItems|系统显示商品清单
|Sale.SaleItems.Goods|在销售人员选择商品选择界面中商品时，系统把该商品添加到商品清单，并更新总价，参见Sale.Calculate
|Sale.SaleItems.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品，并更新总价，参见Sale.Calculate
|Sale.SaleItems.Price|在销售人员更改选定商品的价格时，系统在商品清单中更改该商品的价格，并更新总价，参见Sale.Calculate
|Sale.SaleItems.Num|在销售人员输入选定商品的数量时，系统在商品清单中更改该商品的数量，并更新总价，参见Sale.Calculate
|Sale.SaleItems.Remarks|在销售人员填写商品备注时，系统在商品清单中填写该商品的备注
|||
|Sale.Discount|在销售人员填写完折让金额后，系统检查折让金额是否在折让额度之内
|Sale.Discount.Valid|折让金额在折让额度之内，系统记录折让金额，并更新折让后总价（折让前总价－折让）（若折让金额大于折让前总价，折让后总价为0）
|Sale.Discount.Invalid|折让金额不在折让额度之内，系统提示折让金额超出额度
|||
|Sale.Calculate|系统清空赠品列表，计算购买商品的总价及赠品
|Sale.Calculate.Null|在销售任务中没有购买商品时，系统计算总价为0，并结束Sale.Calculate
|Sale.Calculate.Each|系统计算每项商品分项总价（商品的价格*商品的数量），并将每项商品价格相加计算总价
|Sale.Calculate.CombineReduce|在一组商品符合特价包条件（促销策略-2），系统将这组商品进行标记，并依组合特价策略在总价上减价。
|Sale.Calculate.TotalReduce|如果总价达到总价促销策略（促销策略-3）中的金额，系统依策略赠送赠品／代金劵。赠品和代金劵添加到赠送列表中，
|Sale.Calculate.MemberReduce|如果总价达到该客户相应的促销策略（促销策略-1）中的金额，系统依策略进行促销折让／赠送赠品／赠送代金劵。赠品和代金劵添加到赠送列表中，折让前总额更新为（总价－促销折让）
|Sale.Calculate.Payable|系统计算折让后总额（折让前总额-销售人员输入的折让）
|||
|Sale.End.Null|在销售人员未输入任何商品就提交销售单时，系统提示未输入商品
|Sale.End.Goods|在销售人员输入一系列商品之后提交销售单时，系统提示提交成功，保存销售单并提交给总经理
|||


<h3>3.2.10 销售退货</h3>
<h4>3.2.10.1 特性描述</h4>
在某个业务员和用户达成销售退货意愿后，一个被识别和授权的销售人员开始处理销售，完成商品输入、销售退货单生成。
<br>优先级=高</br>
<h4>3.2.10.2 刺激/响应序列</h4>
刺激：销售人员新建销售退货单<br>
响应：系统自动生成一个销售退货单，计算单据编号<br>
刺激：销售人员保存草稿单<br>
响应：系统保存草稿单<br>
刺激：销售人员输入客户编号<br>
响应：系统显示客户编号，查找并显示该客户的默认业务员<br>
刺激：销售人员更改客户的业务员<br>
响应：系统更改销售单中客户的业务员<br>
刺激：销售人员填写仓库<br>
响应：系统显示销售退货单中仓库<br>
刺激：销售人员要求填写销售退货商品清单<br>
响应：系统显示商品选择界面<br>
刺激：销售人员从商品选择界面选择商品名称<br>
响应：系统显示商品编号，型号，默认单价<br>
刺激：收银员删除已输入商品<br>
响应：系统在销售退货单中删除该商品<br>
刺激：销售人员输入商品数量<br>
响应：系统显示商品数量并计算总金额<br>
刺激：销售人员更改商品单价<br>
响应：系统更改销售退货单中商品单价并计算总金额<br>
刺激：销售人员输入商品备注<br>
响应：系统显示商品备注<br>
刺激：销售人员结束商品选择<br>
响应：系统关闭商品选择界面<br>
刺激：销售人员输入销售退货单备注<br>
响应：系统显示销售退货单备注<br>
刺激：销售人员取消销售退货任务<br>
响应：系统关闭销售退货任务<br>
刺激：销售人员提交销售退货单<br>
响应：系统保存销售退货单并提交给总经理<br>


<h4>3.2.10.3 相关功能需求</h4>
|      |   |
|-------|---|
|SaleReturn.Start|系统应该允许销售人员新建销售退货单|
|SaleReturn.Start.Valid|系统今日产生销售退货单的数量未超出最大额度99999，系统生成一个销售退货单，包括：单据编号（自动计算），客户，业务员（和这个客户打交道的公司员工，可以设置一个客户的默认业务员），操作员（当前登录系统的用户），仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，备注。出货商品清单中的内容暂时为空，包括商品的编号，名称，型号，数量，单价，金额，商品备注。
|SaleReturn.Start.Invalid|系统计算销售退货单的数量超出最大额度99999，系统提示错误
||
|Sale.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
|Sale.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
||
|SaleReturn.Input|系统应该允许销售人员在销售任务中进行键盘输入
|SaleReturn.Input.Save|在销售人员输入保存草稿单命令时，系统要保存草稿单
|SaleReturn.Input.End|在销售人员输入提交销售退货单命令时，系统要结束一个销售退货任务，参见SaleReturn.End
|SaleReturn.Input.Cancel|在销售人员输入取消命令时，系统关闭销售退货任务不做任何处理
|SaleReturn.Input.SaleItems|在销售人员输入填写商品清单命令时，系统执行商品清单填写任务，参见SaleReturn.SaleItems
|SaleReturn.Input.Client|在销售人员输入客户编号或名称时，系统填写销售退货单中客户，参见SaleReturn.Client
|SaleReturn.Input.Salesman|在销售人员填写业务员时，系统更改销售退货单中业务员
|SaleReturn.Input.Remarks|在销售人员填写备注时，系统更改销售退货单中备注
|SaleReturn.Input.Discount|在销售人员填写折让时，系统更改销售退货单中的折让
|SaleReturn.Input.Coupon|在销售人员填写使用代金券数额时，系统记录使用代金券数额
|SaleReturn.Input.Invalid|在销售人员输入不符合数据格式（参见3.4.3）时，系统提示输入格式不符
||
|SaleReturn.Client.Start|在销售任务最开始时输入客户编号，系统要允许销售人员进行输入
|SaleReturn.Client.NotStart|不是在销售任务最开始时输入客户编号，系统不予处理
|SaleReturn.Client.Valid|在销售人员输入已有销售商的客户编号时，系统显示该会员的默认业务员
|SaleReturn.Client.Invalid|在销售人员输入其他输入时，系统提示输入无效
|||
|SaleReturn.SaleItems|系统显示商品清单
|SaleReturn.SaleItems.Goods|在销售人员选择商品选择界面中商品时，系统把该商品添加到商品清单，并更新总价，参见SaleReturn.Calculate
|SaleReturn.SaleItems.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品，并更新总价，参见SaleReturn.Calculate
|SaleReturn.SaleItems.Price|在销售人员更改选定商品的价格时，系统在商品清单中更改该商品的价格，并更新总价，参见SaleReturn.Calculate
|SaleReturn.SaleItems.Num|在销售人员输入选定商品的数量时，系统在商品清单中更改该商品的数量，并更新总价，参见SaleReturn.Calculate
|SaleReturn.SaleItems.Remarks|在销售人员填写商品备注时，系统在商品清单中填写该商品的备注
|||
|SaleReturn.Calculate|系统处理销售任务的商品列表，计算购买商品的总价
|SaleReturn.Calculate.Null|在销售任务中没有购买商品时，系统计算总价为0
|SaleReturn.Calculate.Each|系统计算每项商品分项总价（商品的价格*商品的数量），并将每项商品价格相加计算总价
|SaleReturn.Calculate.Payable|系统计算折让后总额（折让前总额-销售人员输入的折让）
|||
|SaleReturn.End.Null|在销售人员未输入任何商品就提交销售退货单时，系统提示错误
|SaleReturn.End.Goods|在销售人员输入一系列商品之后提交销售退货单时，系统保存销售退货单并提交给总经理
|||

### 3.2.11 进货 ###
#### 3.2.11.1 特性描述 ####
在公司需要进货的条件下，销售员，能够快速准确进货；销售经理,能够快速准确进货；<br/>
总经理，能够审批进货。

<h4>3.2.11.2 刺激/响应序列</h4>
刺激：销售人员新建进货单<br/>
响应：系统以列表显示单据编号，操作员<br/>
刺激：销售人员输入商品备注<br/>
响应：系统更新商品备注<br/>
刺激：销售人员填写供应商<br/>
响应：系统更新列表<br/>
刺激：销售人员填写仓库<br/>
响应：系统更新列表<br/>
刺激：销售人员填写入库商品列表<br/>
响应：系统要返回商品选择列表<br/>
刺激：销售人员选择商品选择界面中商品<br/>
响应：系统把该商品添加到商品清单<br/>
刺激：销售人员删除商品列表中选定的商品<br/>
响应：系统在商品清单中删除该商品<br/>
刺激：销售人员更改选定商品的价格<br/>
响应：系统在商品清单中更改该商品的价格<br/>
刺激：在销售人员输入选定商品的数量<br/>
响应：系统在商品清单中更改该商品的数量<br/>
刺激：销售人员提交进货单<br/>
响应：系统保存进货单并提交给总经理<br>

<h4>3.2.11.3相关功能需求</h4>
<br/>

方法名 | 交互过程
---|---
Stock.Start|系统应允许销售人员新建进货单
Stock.Start.Valid| 在进货单没有超出系统今日额度99999时，系统新建进货单，并显示进货列表，包括单据编号（自动计算），供应商，仓库，操作员，入库商品列表，备注，总额合计
Stock.Invalid | 在进货单超出系统今日额度99999时，系统显示超限提示
Stock.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
Stock.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
Stock.Input.Save | 销售人员保存进货草稿单，系统保存进货草稿单
Stock.input.Cancel | 在销售人员取消输入进货单内容时，系统关闭进货任务
Stock.Input.Note | 销售人员输入商品备注,系统更新商品备注
Stock.Input.Client |销售人员输入客户，系统要返回更新后的进货列表
Stock.Goods.Select | 销售人员填写入库商品列表，系统要返回商品选择列表
Stock.Goods.Add|在销售人员选择商品选择界面中商品时，系统把该商品添加到商品清单|
Stock.Goods.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品
Stock.Goods.Price|在销售人员更改选定商品的价格时，系统在商品清单中更改该商品的价格
Stock.Goods.Num|在销售人员输入选定商品的数量时，系统在商品清单中更改该商品的数量
Stock.Send | 销售人员提交进货单，系统保存进货单信息并提交

<h3>3.2.12 进货退货</h3>
<h4>3.2.12.1特性描述</h4>
公司需要向供应商退货的时候，系统要使销售员和销售经理能够进货退货，使总经理能够审批进货退货。
<h4>3.2.12.2 刺激/响应序列</h4>
刺激：销售人员新建进货退货单<br/>
响应：系统以列表显示单据编号，操作员<br/>
刺激：销售人员输入商品备注<br/>
响应：系统更新商品备注<br/>
刺激：销售人员填写供应商<br/>
响应：系统更新列表<br/>
刺激：销售人员填写仓库<br/>
响应：系统更新列表<br/>
刺激：销售人员填写出库商品列表<br/>
响应：系统要返回商品选择列表<br/>
刺激：销售人员选择商品选择界面中商品<br/>
响应：系统把该商品添加到商品清单<br/>
刺激：销售人员删除商品列表中选定的商品<br/>
响应：系统在商品清单中删除该商品<br/>
刺激：销售人员更改选定商品的价格<br/>
响应：系统在商品清单中更改该商品的价格<br/>
刺激：在销售人员输入选定商品的数量<br/>
响应：系统在商品清单中更改该商品的数量<br/>
刺激：销售人员提交进货退货单<br/>
响应：系统保存进货退货单并提交给总经理<br>

<h4>3.2.12.3相关功能需求</h4>

方法名 | 交互过程
---|---
StockReturn.Start|系统应允许销售人员新建进货退货单
StockReturn.Start.Valid| 在进货退货单没有超出系统今日额度99999时，系统新建进货退货单，并显示退货列表，包括单据编号（自动计算），供应商，仓库，操作员，入库商品列表，备注，总额合计
StockReturn.Invalid | 在进货退货单超出系统今日额度99999时，系统显示超限提示
StockReturn.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
StockReturn.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
StockReturn.Input.Save | 销售人员保存进货退货草稿单，系统保存进货退货草稿单
StockReturn.Input.Cancel | 在销售人员取消输入进货退货单内容时，系统关闭进货退货任务
StockReturn.Input.Note | 销售人员输入商品备注,系统更新商品备注
StockReturn.Input.Client |销售人员输入客户，系统要返回更新后的进货列表
StockReturn.Goods.Select | 销售人员填写出库商品列表，系统要返回商品选择列表
StockReturn.Goods.Add|在销售人员选择商品选择界面中商品时，系统把该商品添加到商品清单|
StockReturn.Goods.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品
StockReturn.Goods.Price|在销售人员更改选定商品的价格时，系统在商品清单中更改该商品的价格
StockReturn.Goods.Num|在销售人员输入选定商品的数量时，系统在商品清单中更改该商品的数量
StockReturn.Send | 销售人员提交进货单，系统保存进货退货单信息并提交

<h3>3.2.13  付款</h3>

<h4>3.2.13.1 特性描述</h4>

公司需要付款时，一个经过识别和授权的财务人员开始制定付款单，系统将付款单信息保存并提交

<h4>3.2.13.2 刺激／响应序列</h4>

刺激：财务人员新建付款单  
响应：系统自动生成一个付款单，计算单据编号  
刺激：财务人员输入客户编号  
响应：系统显示客户基本信息  
刺激：财务人员填写转账列表  
响应：系统计算总额  
刺激：财务人员保存单据  
响应：系统保存单据  
刺激：财务人员提交单据  
响应：系统保存单据并提交  

<h4>3.2.13.3 相关功能需求</h4>

编号|需求描述
--|--
Payment.Start.New |系统应允许财务人员新建付款单
Payment.Start.New.Valid|系统今日产生付款单的数量未超出最大额度99999，系统记录单据编号，并生成一个付款单，包含：单据编号，客户，操作员（当前登录用户），转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。
Payment.Start.New.Invalid|系统计算付款单的数量超出最大额度99999，系统提示错误，拒绝生成付款单
|
Payment.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
Payment.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
|
Payment.Input.Save|在财务人员保存付款单时，系统保存单据信息
Payment.Input.Cancel|在财务人员输入取消命令时，系统结束付款任务
|
Payment.Input.Client|在财务人员输入客户名称或编号后，系统填写付款单中的客户，参见Payment.Client
Payment.Client.Start|在销售任务最开始时输入客户编号或名称，系统要允许销售人员进行输入
Payment.Client.NotStart|不是在销售任务最开始时输入客户编号或名称，系统不予处理
Payment.Client.Valid|在销售人员输入系统中已有销售商的客户编号或名称时，系统显示该客户的名称，编号，默认业务员
Payment.Client.Invalid|在销售人员输入的客户编号或名称不存在时，系统提示该客户不存在  
|
Payment.Input.TransList|在财务人员选择填写转账列表时，系统显示转账列表,见Payment.TransList
Payment.TransList|系统显示转账列表
Payment.TransList.Account|在财务人员选择银行账户后，系统显示银行账户
Payment.TransList.Amount|在财务人员输入向该账户的转账金额后，系统更新总额
Payment.TransList.Remark|在财务人员输入备注时，系统填写备注
Payment.TransList.Delete|在财务人员删除一条转账信息时，系统删除该条信息并更新总额
|
Payment.Input.Submit|在财务人员提交付款单时，系统处理提交任务，见Payment.Submit
Payment.Submit.Null|如果财务人员未填写转账金额就提交，系统提示提交失败
Payment.Submit.Success|如果财务人员填写了转账金额，系统提示提交成功，并将单据保存，发送给总经理



<h3>3.2.15客户管理</h3>
<h4>3.2.15.1 特性描述</h4>
在销售人员需要管理客户信息的情况下，系统要使销售员和销售经理能够管理客户的信息。
<h4>3.2.15.2 刺激/响应序列</h4>
刺激：销售人员输入客户属性<br/>
响应：系统显示客户信息<br/>
刺激：销售人员完成输入<br/>
响应：系统更新客户信息<br/>
<h4>3.2.15.3 相关功能需求</h4>

方法名 | 交互过程
---|---
Client.Add|销售人员选择增加客户,系统提示销售人员输入增加的客户信息
Client.Add.Input|销售人员输入新客户属性，包括分类（进货商、销售商）、级别（五级，一级普通用户，五级VIP客户）、姓名、电话（默认为无）、地址（默认为无）、邮编（默认为无）、电子邮箱（默认为无）、应收额度（默认为0）、默认业务员（默认为无）。系统显示（输出）新客户信息，客户的属性有：编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员
Client.Add.End|销售人员结束输入，系统处理结束增加客户任务
Client.Add.End.Valid|若销售人员未输入客户的名称、级别、分类，系统提示请输入客户的必要信息
Client.Add.End.Invalid|若销售人员已输入客户的名称、级别、分类，系统保存客户信息并结束增加客户任务
Client.Find|销售人员输入客户名称或编号查找用户，系统显示所查找客户信息
Client.Find.NotFound|输入的名称或编号不存在，系统提示没有该客户
Client.Find.Delete|销售人员选择删除某客户, 系统删除该客户信息
Client.Find.Change|销售人员编辑客户属性，系统保存客户新信息
Client.Change.ReceiveLimit|销售人员选择修改客户应收额度，系统处理修改应收额度操作。参见Client.ReceiveLimit
Client.ReceiveLimit.Low|若操作员无最高权限，系统提示权限不足，应收额度仅限最高权限修改
Client.ReceiveLimit.High|若操作员有最高权限，系统修改应收额度并保存



<h2>3.3 非功能需求</h2>

<h3>3.3.1 安全性</h3>

<h4>3.3.1.1登录</h4>

<h5>3.3.1.1.1特性描述</h5>
为了保证所有使用本系统的用户的信息安全，维护用户的隐私权，所有用户在使用系统提供的一切功能之前，需要凭借独有的标识和标识对应的密码进行登陆，进行身份验证和权限配置。

<h5>3.3.1.1.2刺激/响应序列</h5>
刺激：用户通过入口进入系统<br/>
响应：系统显示登陆界面<br/>
刺激：用户输入用户名和密码，发出登陆请求<br/>
响应：系统对用户的登陆信息进行验证，如果用户名存在且和密码匹配，则登陆成功，进入该用户的操作初始界面，否则提示用户登陆失败。<br/>

<h5>3.3.1.1.3详细描述</h5>

方法名 | 交互过程
---|---
Safe.Login|系统应该要求用户登录，进行身份验证
Safe.Cancel|当用户取消登录时，退出系统
Safe.Del|系统应该允许用户删除已经输入的信息
Safe.Login.NoUser|当用户输入的用户名不存在时，系统提示登录失败
Safe.Login.Incompitable|当用户输入的用户名和密码不匹配时，系统提示登录失败 
Safe.Login.Null|当用户名或密码空缺时，系统提示空缺，要求补全
Safe.Login.Invalid|当用户输入了非法字符的时候，系统提示输入非法 
Safe.Login.Success|当用户的用户名和密码匹配时，登录成功，跳转到用户相应的初始界面
Safe.Login.Fail|登录失败，参见Safe.Login.NoUser，Safe.Login.InCompiable

<h4>3.3.1.2修改密码</h4>

<h5>3.3.1.2.1特性描述</h5>
一个已经经过验证的用户有权利修改个人密码，以保证信息安全。

<h5>3.3.1.2.2刺激/响应序列</h5>
刺激：用户发出修改密码请求<br/>
响应：系统显示修改密码界面，提示用户输入旧密码和新密码（两遍）<br/>
刺激：用户输入旧密码和新密码，请求修改密码<br/>
响应：系统对用户名和密码再次验证，若匹配并且两个新密码相同，则提示修改成功，并存储。<br/>
刺激：用户输入错误的修密码<br/>
响应：系统提示旧密码错误<br/>
刺激：用户输入的两个新密码不相同<br/>
响应：系统提示两次输入不匹配，请用户重新输入<br/>
刺激：用户输入的密码格式错误<br/>
响应：系统提示密码格式错误，提示修改<br/>

<h5>3.3.1.1.3详细描述 </h5>

方法名 | 交互过程
---|---
Safe.ChangePW|系统应该允许用户修改密码
Safe.ChangePW.Start|当用户发出修改密码请求时，系统进入修改密码界面
Safe.ChangePW.Cancel|当用户取消修改密码时，系统不做任何数据处理，返回初始界面
Safe.ChangePW.FalseOld|当用户输入错误的旧密码是，系统提示旧密码错误
Safe.ChangePW.NewDiff|当用户输入的新密码不相同时，系统提示两次输入不同，提示用户检查
Safe.ChangePW.Null|当用户的输入有空缺时，系统提示空缺，要求补全
Safe.ChangePW.Success|当用户旧密码正确且新密码一致时，提示修改成功
Safe.ChangePW.Invalid|当用户输入字符格式非法时，提示错误要求重新输入

<h3>3.3.2可维护性</h3>
Modifiability1: 在系统的账户、商品、进货单、进货退货单、销售出货单、销售退货单、现金费用单编号数据格式发生变化时(见Format)，系统要能够在3人2天内完成。<br/>
Modifiability2: 如果系统需要扩展将收支数据进行图形化显示，要能够在1个人月内完成。<br/>
Modifiability3: 如果需要扩展新的部门人员(比如销售员，库存管理人员)及其职能，要能够在0.5个人月内完成<br/>

<h3>3.3.3易用性</h3>
Usability1: 对用户的平均培训时间不能超过2小时<br/>
Usability2: 在进货单信息、进货退货单、销售出货单，销售退货单，付款单，收款单现金费用单内容变化时，系统可以在5分钟以内更新，保证消息的及时性。<br/>

<h3>3.3.4可靠性</h3>
Reliability1: 当50以内的人同时在线时，系统不崩溃。<br/>
Reliability2: 系统崩溃后，已更新保存的数据不会丢失。<br/>
Reliability3: 在客户端与服务器通信时，如果网络故障，系统不能出现故障。<br/>
Reliability3.1: 客户端应该检测到故障，并尝试重新连接服务器3次，每次15秒。<br/>
Reliability3.1.1如果重新连接不成功，客户端报警。<br/>

### 3.3.5 业务规则
**BR1**：适用（商品标识，参照日期）的商品赠送促销策略<br/>
（促销商品标识=商品标识）<br/> 而且（（开始日期早于等于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR2**：适用（额度，参照日期）的总额赠送促销策略<br/>
（促销额度<=额度）而且（（开始日期早于等于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR3**：适用（商品标识，参照日期）的商品特价促销策略<br/>
（促销商品标识=商品标识）<br/> 而且（（开始日期早于晚于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR4**：适用（额度，参照日期）的总额特价促销策略<br/>
（促销额度<=额度）而且（不存在：本促销额度<另一个促销额度<=额度）<br/> 而且（（开始日期早于等于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR5**：积分兑换规则，该规则可能变化<br/>
50积分=1元RMB<br/>
**BR6**：退货日期约定<br/>
今天-销售日期>=15天<br/>
**BR7**：在参照日期时退货的赠品差<br/>
Pre=销售记录的普通商品总价-以前退货记录的普通商品总价之和<br/>
Post=Pre-本次退货记录的普通商品总价<br/>
Pre赠品=适用于（Pre，参照日期）的总额赠送策略（参见BR2）的赠送商品及数量<br/>
Post赠品=适用于（Post，参照日期）的总额赠送策略（参见BR2）的赠送商品及数量
赠品差=Pre赠品-Post赠品<br/>
**BR8**：在参照日期时退货的账款差<br/>
Pre=销售记录的普通商品总价-以前退货记录的普通商品总价之和<br/>
Post=Pre-本次退货记录的普通商品总价<br/>
Pre折扣率=适用于（Pre，参照日期）的总额赠送策略（参见BR4）的折扣率<br/>
如果无适用的总额赠送策略：Pre折扣率=100%<br/>
Post折扣率=适用于（Post，参照日期）总额赠送策略（参见BR4）的折扣率<br/>
如果无适用的总额赠送策略：Post折扣率=100%<br/>
账款差=Pre×Pre折扣率-Post×Post折扣率<br/>
**BR9**：礼品赠送规则，积分数额档可能发生变化<br/>
如果会员的出生日期是当天，触发“生日”礼品赠送事件<br/>
在会员积分数额初次超档时，触发“积分”礼品赠送事件<br/>
积分数额档初始为1000、2000、5000，此后每增加5000为一档. <br/>
多个礼品赠送事件可以同时发生<br/>
每个会员由其所注册的店铺进行礼品赠送服务<br/>
**BR10**：一个商品赠送策略存在重复的判定规则<br/>
S1为指定的商品赠送策略<br/>
S2为其他的商品赠送策略<br/>
如果存在满足下列条件的S2，则指定商品赠送策略存在重复：<br/>
(S1.促销商品标识=S2.促销商品标识 并且 S1.赠品标识=S2.赠品标识) 并且<br/>
((S1.开始日期早于等于S2的结束日期<br/> 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期<br/> 并且 S2.开始日期晚于等于S1的开始日期））<br/>
**BR11**：一个商品特价策略存在重复的判定规则<br/>
S1为指定的商品特价策略<br/>
S2为其他的商品特价策略<br/>
如果存在满足下列条件的S2，则指定商品特价策略存在重复：<br/>
(S1.促销商品标识=S2.促销商品标识) 并且
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））<br/>
**BR12**：一个总额赠送策略存在重复的判定规则<br/>
S1为指定的总额赠送策略<br/>
S2为其他的总额赠送策略<br/>
如果存在满足下列条件的S2，则指定总额赠送策略存在重复：<br/>
(|S1.额度-S2.额度|<50 并且<br/> S1.赠品标识=S2.赠品标识) 并且<br/>
((S1.开始日期早于等于S2的结束日期<br/> 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期<br/> 并且 S2.开始日期晚于等于S1的开始日期））<br/>
**BR13**：一个总额特价策略存在重复的判定规则<br/>
S1为指定的总额特价策略<br/>
S2为其他的总额特价策略<br/>
如果存在满足下列条件的S2，则指定总额特价策略存在重复：<br/>
(|S1.额度-S2.额度|<30) 并且<br/>
((S1.开始日期早于等于S2的结束日期<br/> 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期<br/> 并且 S2.开始日期晚于等于S1的开始日期））<br/>

### 3.3.6 约束
IC1：在开发过程中缺少可以的打印机，需要使用文件系统模拟打印机。<br/>
IC2：系统要在网络上分布为一个服务器和多个客户端。<br/>

## 3.4 数据需求

### 3.4.1 数据定义
DR1: 库存单据、出入库记录、进货单据、进货退货单据、销售记录、统计分析数据、收付款单记录、单据审批记录、系统日志需要保存2年。<br/>
DR2: 财务单据的修改和删除采用红冲和红冲并复制策略。<br/>
DR3: 数据要每隔2周备份一次。<br/>

### 3.4.2 默认数据
默认数据用于<br/>
- 系统中新增加数据时<br/>
- 编辑数据时不小心将相关内容清空<br/>

Default1：商品的数量默认为1<br/>
Default2：费用或价格的数据默认为0<br/>
Default3：用户的默认身份为销售人员<br/>
Default4：时间默认为当天<br/>
Default5：操作人员工号默认为当前登录用户<br/>
Default6：商品出库原因默认为到期报废<br/>
Default7:使用代金券金额默认为0<br/>
Default8:折让默认为0<br/>

<h3>3.4.3 数据格式要求</h3>
Format01：库存赠送单单据编号格式为KCZSD、-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format02：库存报溢单单据编号格式为KCBYD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format03：库存报损单单据编号格式为KCBSD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format04：库存报警单单据编号格式为KCBJD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format05：进货单单据编号格式为JHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format06：进货退货单单据编号格式为JHTHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format07：销售单单据编号格式为XSD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format08：销售退货单单据编号格式为XSTHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format09：收款单单据编号格式为SKD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format10：付款单单据编号格式为FKD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format11：现金费用单单据编号格式为XJFYD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format12：商品编号格式为PRO-xxxx-yyyy，xxxx表示分类id，yyyy每天从1开始编号<br/>
Format13：客户编号格式：TBD<br/>
Format14：价格和费用的格式必须是：大于等于0、精确到小数点后2位的浮点数，单位为RMB<br/>
Format15：日期的格式必须是：yyyyMMdd<br/>
Format16：数量的格式必须是：正整数<br/>

<h2>3.5 其他要求</h5>
系统主要操作都有日志进行记录，并对经理和财务人员提供查询功能。
主要操作包括：库存赠送，库存报溢，库存报损，库存报警，进货，进货退货，销售，销售退货，付款，收款，处理现金费用，审批单据







