# 灯具进销存需求规格说明文档 V1.0
### V2.0

####  By CuteGroup

## 更新历史
| 修改人员 | 日期 | 变更原因 |
|----|----|---|
|高毓彬|2017.9.22|最初草稿|
|张翔宇|2017.9.24|修改功能需求|

## 1. 引言

### 1.1 目的
本文档描述了灯具进销存系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。<br/>
除特殊说明之外，本文档所包含的需求都是高优先级需求。

### 1.2 范围
本系统是为×××民营灯具企业开发的进销存业务系统，开发的目标是用于帮助该商店处理日常的重点业务，包括商品管理、客户管理、进货、销售、付款、收款等。<br/>
通过本系统的应用，期望为×××民营灯具企业系统上线运行六个月后，减少挤压库存，增加销售额，提高财务人员工作效率，为经理的决策做支持。

### 1.3 参考文献
1. IEEE标准文档
2. 灯具进销存系统用例文档 V1.0

## 2. 总体描述

### 2.1商品前景

### 2.1.1背景与机遇
XXX民营企业专业从事灯具照明行业，是某灯具的南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作，服务对象包括项目业主、施工单位、分销商、设计院、终端用户等。<br/>
由于其业务规模的扩大，其原先使用的系统已经不适应其业务发展需求。首先是因公司规模扩大，雇员增多，公司工作效率和管理效率降低；其次，由于库存量增大，原有系统无法及时处理库存，使得库存挤压现象严重；再次，企业面临的竞争更加激烈，原有系统无法给公司决策人员提供良好的决策支持。<br/>
灯具进销存系统就是为满足XXX民营灯具企业新的业务发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成日常任务，客户端与数据集中服务器采用实时通信的方式完成数据交换。<br/>

### 2.1.2 业务需求
BR1：在系统使用6个月后，商品积压、缺货和报废的现象要减少50%<br/>
BR2：在系统使用6个月后，销售人员销售总额提高30%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最好情况： 50%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最可能情况：30%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最坏情况：10%<br/>
BR3：在系统使用6个月后，财务人员的工作效率要提高50%<br/>
BR4：在系统使用6个月后，用户满意度要提高25%<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;度量：客户好评率的提升幅度<br/>
BR5：在系统使用6个月后，能为经理在公司发展上提供误差不大于20%的决策方案<br/>

### 2.2 商品功能
SF1：分析商品库存，发现可能的商品积压、缺货和报废现象<br/>
SF2：根据市场变化调整销售的商品<br/>
SF3：制定促销手段，处理积压商品<br/>
SF4：进行商品促销和商品赠送<br/>
SF5：掌握员工变动和授权情况<br/>
SF6：处理商品入库与出库<br/>
SF7：发展会员，提高顾客回头率<br/>
SF8：允许积分兑换商品和赠送吸引会员的礼品，提高会员满意度<br/>
SF9：帮助销售人员处理销售与退货任务<br/>
SF10：分析销售情况，为总经理提供决策支持。<br/>
SF11：为财务人员提供各种财务单据和报表<br/>

### 2.3 用户特征
用户 | 基本特征
---|---
销售人员| 共有4～8个销售人员，他们每天都要完成大量的销售任务，预估计在顾客流量较大的节假日，他们平均每分钟至少要销售5件商品。他们每天还要多次中断销售处理退货，可能一次退回单个商品，更可能是一次退回多个商品。<br/>因为任务较为频繁，而且涉及钱财事宜，所以他们对软件系统的依赖很大，希望新系统要尽可能帮他们解决问题。
库存管理人员|共有1～2个库存管理人员。他们每天都要一次进行商品库存分析，3～4天进行一次十几种到几十种新购入商品入库，每周1～2次淘汰报废商品，每月多次将损坏或者劣质商品销库。他们还需要对商品进行分类和管理，并根据实际情况处理各类单据。
总经理 | 共有2个总经理。他主要负责审批各类单据和制定经营策略。每个月都会有几个生产厂家针对自己的商品提出赠送或特价促销请求。每次换季时节，都会有几十种商品有积压风险，总经理要通过为这些商品制定赠送或特价促销策略，来及时处理这些商品。每个月也都会有几个销售不佳的商品会存在保质期过期危险，所以总经理也要为它们制定促销策略。在每年的几个重要节日，总经理要制定促进策略，以与其他商家竞争，通常使用总额特价策略和总额赠送策略。<br/>总经理要管理店内所有的商品，同时还要负责店内的各种日常管理事务，所以工作繁忙，希望新系统不要太多地浪费他们的时间。
管理员 | 整个系统有1个系统管理员，他的工作是每月几次处理员工雇佣、离职与职位变换。离职和职位变换通常是单个员工行为。系统管理员是计算机专业维护人员，计算机技能很好。
财务人员 |财务人员共1～2名，负责制作各类财务报表，并整理和统计公司的各类财务情况。他们还负责公司的期初建账工作和账户管理，故而希望系统能给他们带来更为便捷的操作模板，提高他们的工作效率。

### 2.4 约束
CON1: 系统使用图形界面。<br/>
CON2: 项目要使用持续集成方法进行开发。<br/>
CON3: 在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告。<br/>
CON4: 采用Java语言开发。<br/>
CON5: 用户远程使用系统。<br/>
CON6: 项目开发要严格按照计划执行<br/>

### 2.5 假设和依赖
AE1：在将上一批入库商品出库90%之前，下一批商品不会被入库；<br/>
AE2：新一批商品的每天出库量与上一批商品的每天出库量基本相同，商品出库情况比较稳定；<br/>
AE3：一个额度的赠送促销会自动包含所有比它小的额度的促销赠送商品<br/>
AE4: 所有使用者对自身业务足够熟悉，不会因人为原因造成工作（单据审批、出库入库等）的积压。<br/>
AE5: 销售人员分为销售员和销售经理。销售员最多折让1000元，销售经理可以折让5000元，总经理可以任意金额的折让。<br/>

# 3 详细需求描述

## 3.1 对外接口需求

### 3.1.1 用户界面
界面风格：<br/> 本系统采用图形化用户界面，界面风格简洁，操作方便，支持用户用鼠标和键盘进行操作，具体考虑实现扁平化界面，包括Windows通用图形界面，以及更多地使用look&feel进行界面定制。
界面布局：<br/> 界面布局整齐合理，清爽易用。
示例：（见同目录下的png图片附件）

### 3.1.2 硬件接口
无

### 3.1.2 软件接口
数据使用MYSQL数据库进行保存，需要机器具有jre。

### 3.1.4 通信接口
客户端与服务器使用RMI进行通信。

## 3.2 功能需求

### 3.2.7 商品管理 ###

#### 3.2.7.1 特性描述 ####
库存管理人员根据实际情况对库存商品进行属性初始化、增加商品、修改商品、删除商品、查找商品等具体操作。
如果操作对原有的库存信息进行了修改，则对库存信息进行更新。
<br>优先级=高

#### 3.2.7.2 刺激/响应序列 ####
刺激：库存管理人员输入要新增的商品名称  
响应：系统查找是否存在同名商品，若不存在，则自动创建该商品并初始化该商品属性。  
刺激：库存管理员输入新商品的编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价。  
响应：系统更新商品属性为修改过的值  
刺激：库存管理员输入要查找的商品名称或商品编号  
响应：系统显示所有包含该信息的商品。  
刺激：库存管理员选中并删除某商品  
响应：系统将该商品从商品列表中清除（惰性删除）  
刺激：库存管理员选中并修改某商品的信息  
响应：系统将商品信息更新为修改后的值

#### 3.2.7.3 相关功能需求 ####

方法名|交互过程
---|---
|Goods.New.Initialize|系统在某个商品被创建后，自动按类别对其所有属性初始化。
|Goods.New.Input|系统应该允许库存管理人员在新建商品时进行键盘输入。
|Goods.New.Check|系统应该在库存管理员输入要新建的商品后，检查其是否已存在。
|Goods.New.Refresh|系统在商品新建时，允许库存管理人员手动对商品的各项属性进行初始赋值。
|Goods.New.End|在库存管理人员完成增加商品操作后，系统关闭商品增加任务并更新库存信息。
|Goods.Check.Input|系统应该允许库存管理人员用键盘输入要查找的商品的编号或名称。
|Goods.Check.Info|在库存管理人员输入结束后，系统反馈有关商品的信息。
|Goods.Check.Choose|库存管理人员选中某商品后，系统显示商品各项信息，包括：编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价。
|Goods.Check.Return|库存管理人员结束查找或查看时，系统关闭查找任务。
|Goods.Delete.Delete|在库存管理人员选中某商品并选择删除后，系统将该商品从商品列表清除
|Goods.Delete.End|在库存管理人员结束删除操作后，系统关闭删除任务。
|Goods.Change.Change|在库存管理人员选中并修改商品的某项信息后，系统更新该商品的信息。
|Goods.Change.End|在库存管理人员结束更改操作后，系统关闭更改任务。

<h3>3.2.12  收款</h3>

<h4>3.2.12.1 特性描述</h4>

公司需要收款时，一个经过识别和授权的财务人员开始制定收款单，系统将收款单信息保存并提交  

优先级＝高

<h4>3.2.12.2 刺激／响应序列</h4>

刺激：财务人员新建收款单  
响应：系统自动生成一个收款单，计算单据编号  
刺激：财务人员输入客户编号或名称  
响应：系统显示符合条件的客户的名称和编号  
刺激：财务人员选择账户  
响应：系统将账户加入转账列表  
刺激：财务人员填写转账列表  
响应：系统计算总额  
刺激：财务人员保存单据  
响应：系统保存单据  
刺激：财务人员提交单据  
响应：系统保存单据并提交  
刺激：财务人员取消单据  
响应：系统取消单据并结束收款单回合  

<h4>3.2.12.3 相关功能需求</h4>

编号|需求描述
---|---
Collection.Start.New |系统应允许财务人员新建收款单
Collection.Start.New.Valid|系统今日产生收款单的数量未超出最大额度99999，系统记录单据编号，并生成一个收款单，包含：单据编号，客户，操作员（当前登录用户），转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。
Collection.Start.New.Invalid|系统计算收款单的数量超出最大额度99999，系统提示错误，拒绝生成收款单
|
Collection.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
Collection.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
|
Collection.Input.Save|在财务人员保存收款单时，系统保存单据信息，提示保存成功
Collection.Input.Cancel|在财务人员输入取消命令时，系统结束收款任务
Collection.Input.Client|在财务人员输入客户名称或编号后，系统显示符合条件的客户名称和编号，参见Collection.Client
Collection.Input.TransList|在财务人员选择填写转账列表时，系统显示转账列表,见Collection.TransList  
Collection.Input.Submit|在财务人员提交收款单时，系统处理提交任务，见Collection.Submit
|
Collection.Client|系统显示查找客户结果  
Collection.Client.Exist|在系统中有符合条件的客户时，系统显示符合条件的客户列表，包括客户名称、编号  
Collection.Client.NotExist|在系统中没有有符合条件的客户时，系统提示该客户不存在  
Collection.Client.Choose|在财务人员选择客户并确认后，系统将客户添加到收款单中
|
Collection.TransList|系统显示转账列表
Collection.TransList.Account|在财务人员选择银行账户后，系统将银行账户添加到转账列表  
Collection.TransList.Amount|在财务人员输入向该账户的转账金额后，系统更新总额
Collection.TransList.Remark|在财务人员输入备注时，系统填写备注
Collection.TransList.Delete|在财务人员删除一条转账信息时，系统删除该条信息并更新总额
|
Collection.Submit|系统提交单据
Collection.Submit.Null|如果财务人员未填写转账金额就提交，系统提示提交失败
Collection.Submit.Success|如果财务人员填写了转账金额，系统条单据，提示提交成功，并将单据保存，发送给总经理



<h3>3.2.13  付款</h3>

<h4>3.2.13.1 特性描述</h4>

公司需要付款时，一个经过识别和授权的财务人员开始制定付款单，系统将付款单信息保存并提交  

优先级＝高

<h4>3.2.13.2 刺激／响应序列</h4>

刺激：财务人员新建付款单  
响应：系统自动生成一个付款单，计算单据编号  
刺激：财务人员输入客户编号或名称  
响应：系统显示符合条件的客户的名称和编号  
刺激：财务人员选择账户  
响应：系统将账户加入转账列表  
刺激：财务人员填写转账列表  
响应：系统计算总额  
刺激：财务人员保存单据  
响应：系统保存单据  
刺激：财务人员提交单据  
响应：系统保存单据并提交  
刺激：财务人员取消单据  
响应：系统取消单据并结束付款单回合  

<h4>3.2.13.3 相关功能需求</h4>

编号|需求描述
--|--
Payment.Start.New |系统应允许财务人员新建付款单
Payment.Start.New.Valid|系统今日产生付款单的数量未超出最大额度99999，系统记录单据编号，并生成一个付款单，包含：单据编号，客户，操作员（当前登录用户），转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。
Payment.Start.New.Invalid|系统计算付款单的数量超出最大额度99999，系统提示错误，拒绝生成付款单
|
Payment.Open|在财务人员选择打开草稿单时，系统给出草稿单列表
Payment.Open.Choose|财务人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
|
Payment.Input.Save|在财务人员保存付款单时，系统保存单据信息，提示保存成功
Payment.Input.Cancel|在财务人员输入取消命令时，系统结束付款任务
Payment.Input.Client|在财务人员输入客户名称或编号后，系统显示符合条件的客户名称和编号，参见Payment.Client
Payment.Input.TransList|在财务人员选择填写转账列表时，系统显示转账列表,见Payment.TransList  
Payment.Input.Submit|在财务人员提交付款单时，系统处理提交任务，见Payment.Submit
|
Payment.Client|系统显示查找客户结果  
Payment.Client.Exist|在系统中有符合条件的客户时，系统显示符合条件的客户列表，包括客户名称、编号  
Payment.Client.NotExist|在系统中没有有符合条件的客户时，系统提示该客户不存在  
Payment.Client.Choose|在财务人员选择客户并确认后，系统将客户添加到收款单中
|
Payment.TransList|系统显示转账列表
Payment.TransList.Account|在财务人员选择银行账户后，系统将银行账户添加到转账列表  
Payment.TransList.Amount|在财务人员输入向该账户的转账金额后，系统更新总额
Payment.TransList.Remark|在财务人员输入备注时，系统填写备注
Payment.TransList.Delete|在财务人员删除一条转账信息时，系统删除该条信息并更新总额
|
Payment.Submit|系统提交单据
Payment.Submit.Null|如果财务人员未填写转账金额就提交，系统提示提交失败
Payment.Submit.Success|如果财务人员填写了转账金额，系统条单据，提示提交成功，并将单据保存，发送给总经理




<h3>3.2.9 销售</h3>
<h4>3.2.9.1 特性描述</h4>
在某个业务员和用户谈成了一笔销售生意后，一个被识别和授权的销售人员开始处理销售，完成商品输入、销售单生成。
<br>优先级=高</br>
<h4>3.2.9.2 刺激/响应序列</h4>
刺激：销售人员新建销售单<br>
响应：计算单据编号，系统自动生成一个销售单<br>
刺激：销售人员打开草稿单<br>
响应：系统打开草稿单，使之进入编辑状态<br>
刺激：销售人员保存草稿单<br>
响应：系统保存草稿单<br>
刺激：销售人员要求查找客户<br>
响应：系统显示客户选择界面<br>
刺激：销售人员选择客户并确认<br>
响应：系统在单据中显示客户名字，客户编号，和默认业务员<br>
刺激：销售人员更改客户的业务员<br>
响应：系统更改销售单中客户的业务员<br>
刺激：销售人员填写仓库<br>
响应：系统显示销售单中仓库<br>
刺激：销售人员要求填写出货商品清单<br>
响应：系统显示商品选择界面<br>
刺激：销售人员从商品选择界面选择商品并确认<br>
响应：系统在销售单中添加该商品，更新折让前总额和折让后总额<br>
刺激：销售人员在商品选择页面中输入商品备注<br>
响应：系统显示商品备注<br>
刺激：销售人员在商品选择界面中更改商品默认单价<br>
响应：系统更改商品选择界面中商品单价<br>
刺激：销售人员在商品选择界面中更改商品默认数量<br>
响应：系统更改商品选择界面中商品数量<br>
刺激：销售人员删除已输入商品<br>
刺激：销售人员确认结束商品选择<br>
响应：系统关闭商品选择界面<br>
刺激：销售人员输入折让金额，代金劵金额<br>
响应：系统计算折让后总额<br>
刺激：销售人员要求获取促销策略<br>
响应：系统更新使用策略列表，赠品列表，赠券金额和折让后总额<br>
刺激：销售人员输入销售单备注<br>
响应：系统显示销售单备注<br>
刺激：销售人员取消销售任务<br>
响应：系统关闭销售任务<br>
刺激：销售人员提交销售单<br>
响应：系统保存销售单并提交给总经理<br>


<h4>3.2.9.3 相关功能需求</h4>
|      |   |
|-------|---|
|Sale.Start|系统应该允许销售人员新建销售单|
|Sale.Start.Valid|系统今日产生销售单的数量未超出最大额度99999，系统生成一个销售出货单，包括：单据编号（自动计算），客户，业务员（和这个客户打交道的公司员工，可以设置一个客户的默认业务员），操作员（当前登录系统的用户），仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，使用策略列表，赠品列表，备注。出货商品清单中的内容暂时为空，包括商品的编号，名称，型号，数量，单价，金额，商品备注。
|Sale.Start.Invalid|系统计算销售单的数量超出最大额度99999，系统提示错误
||
|Sale.Open|在销售人员选择打开草稿单时，系统给出草稿单列表
|Sale.Open.Choose|销售人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
||
|Sale.Input|系统应该允许销售人员在销售任务中进行键盘输入
|Sale.Input.Save|在销售人员输入保存草稿单命令时，系统要保存草稿单
|Sale.Input.End|在销售人员输入提交销售单命令时，系统要结束一个销售任务，参见Sale.End
|Sale.Input.Cancel|在销售人员输入取消命令时，系统关闭销售任务不做任何处理
|Sale.Input.SaleItems|在销售人员输入选择商品命令时，系统执行商品清单填写任务，参见Sale.SaleItems
|Sale.Input.Client|在销售人员输入选择客户命令时，系统填写销售单中客户编号和客户姓名
|Sale.Input.Salesman|在销售人员填写业务员时，系统更改销售单中业务员
|Sale.Input.Remarks|在销售人员填写备注时，系统更改销售单中备注
|Sale.Input.Discount|在销售人员填写折让时，系统记录折让金额，并更新折让后总额
|Sale.Input.Coupon|在销售人员填写使用代金券数额时，系统记录使用代金券数额，并更新折让后总额
|||
|Sale.SaleItems|系统显示选择商品窗口
|Sale.SaleItems.Goods|在销售人员点击确认后，系统把该商品添加到商品清单，并更新总价，参见Sale.Calculate
|Sale.SaleItems.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品，并更新总价，参见Sale.Calculate
|Sale.SaleItems.Price|在销售人员更改选定商品的价格时，系统在选择商品窗口中更改该商品的价格
|Sale.SaleItems.Num|在销售人员更改选定商品的数量时，系统在选择商品窗口中更改该商品的数量
|Sale.SaleItems.Remarks|在销售人员填写商品备注时，系统在选择商品窗口中更改该商品的备注
|||
|Sale.Calculate|系统计算购买商品的总价及获得赠送结果
|Sale.Calculate.Null|在销售任务中没有购买商品时，系统计算总价为0，并结束Sale.Calculate
|Sale.Calculate.Each|系统计算每项商品分项总价（商品的价格*商品的数量），并将每项商品价格相加计算总价
|Sale.Calculate.Payable|系统计算折让后总额（折让前总额-销售人员输入的折让-使用代金券金额）
|Sale.Calculate.Strategy|销售人员选择获取促销策略后，系统按照所获取的促销策略更新使用策略列表，赠品清单和折让后总额
|||
|Sale.End.Null|在销售人员未输入任何商品或未选择客户就提交销售单时，系统提示请填写或输入所有项，拒绝提交
|Sale.End.Invalid|在销售人员提交的单据输入不符合数据格式（参见3.4.3）时，系统提示输入格式不符，拒绝提交
|Sale.End.Goods|在销售人员输入一系列商品之后提交销售单时，系统提示提交成功，保存销售单并提交给总经理
|||


<h3>3.2.10 销售退货</h3>
<h4>3.2.10.1 特性描述</h4>
在某个业务员和用户达成销售退货意愿后，一个被识别和授权的销售人员开始处理销售，完成商品输入、销售退货单生成。
<br>优先级=高</br>
<h4>3.2.10.2 刺激/响应序列</h4>
刺激：销售人员新建销售退货单<br>
响应：计算单据编号，系统自动生成一个销售退货单<br>
刺激：销售人员打开草稿单<br>
响应：系统打开草稿单，使之进入编辑状态<br>
刺激：销售人员保存草稿单<br>
响应：系统保存草稿单<br>
刺激：销售人员要求查找客户<br>
响应：系统显示客户选择界面<br>
刺激：销售人员选择客户并确认<br>
响应：系统在单据中显示客户名字，客户编号，和默认业务员<br>
刺激：销售人员更改客户的业务员<br>
响应：系统更改销售单中客户的业务员<br>
刺激：销售人员填写仓库<br>
响应：系统显示销售单中仓库<br>
刺激：销售人员要求填写出货商品清单<br>
响应：系统显示商品选择界面<br>
刺激：销售人员从商品选择界面选择商品并确认<br>
响应：系统在销售单中添加该商品，更新折让前总额和折让后总额<br>
刺激：销售人员在商品选择页面中输入商品备注<br>
响应：系统显示商品备注<br>
刺激：销售人员在商品选择界面中更改商品默认单价<br>
响应：系统更改商品选择界面中商品单价<br>
刺激：销售人员在商品选择界面中更改商品默认数量<br>
响应：系统更改商品选择界面中商品数量<br>
刺激：销售人员删除已输入商品<br>
刺激：销售人员确认结束商品选择<br>
响应：系统关闭商品选择界面<br>
刺激：销售人员输入折让金额，代金劵金额<br>
响应：系统计算折让后总额<br>
刺激：销售人员输入销售退货单备注<br>
响应：系统显示销售退货单备注<br>
刺激：销售人员取消销售退货任务<br>
响应：系统关闭销售退货任务<br>
刺激：销售人员提交销售退货单<br>
响应：系统保存销售退货单并提交给总经理<br>


<h4>3.2.10.3 相关功能需求</h4>
|      |   |
|-------|---|
|SaleReturn.Start|系统应该允许销售人员新建销售退货单|
|SaleReturn.Start.Valid|系统今日产生销售退货单的数量未超出最大额度99999，系统生成一个销售退货单，包括：单据编号（自动计算），客户，业务员（和这个客户打交道的公司员工，可以设置一个客户的默认业务员），操作员（当前登录系统的用户），仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，备注。出货商品清单中的内容暂时为空，包括商品的编号，名称，型号，数量，单价，金额，商品备注。
|SaleReturn.Start.Invalid|系统计算销售退货单的数量超出最大额度99999，系统提示错误
||
|SaleReturn.Open|在销售人员选择打开草稿单时，系统给出草稿单列表
|SaleReturn.Open.Choose|销售人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
||
|SaleReturn.Input|系统应该允许销售人员在销售退货任务中进行键盘输入
|SaleReturn.Input.Save|在销售人员输入保存草稿单命令时，系统要保存草稿单
|SaleReturn.Input.End|在销售人员输入提交销售退货单命令时，系统要结束一个销售任务，参见SaleReturn.End
|SaleReturn.Input.Cancel|在销售人员输入取消命令时，系统关闭销售任务不做任何处理
|SaleReturn.Input.SaleItems|在销售人员输入选择商品命令时，系统执行商品清单填写任务，参见SaleReturn.SaleItems
|SaleReturn.Input.Client|在销售人员输入选择客户命令时，系统填写销售退货单中客户编号和客户姓名
|SaleReturn.Input.SaleReturnsman|在销售人员填写业务员时，系统更改销售退货单中业务员
|SaleReturn.Input.Remarks|在销售人员填写备注时，系统更改销售退货单中备注
|SaleReturn.Input.Discount|在销售人员填写折让时，系统记录折让金额，并更新折让后总额
|SaleReturn.Input.Coupon|在销售人员填写使用代金券数额时，系统记录使用代金券数额，并更新折让后总额
||
|SaleReturn.SaleItems|系统显示选择商品窗口
|SaleReturn.SaleItems.Goods|在销售人员点击确认后，系统把该商品添加到商品清单，并更新总价，参见SaleReturn.Calculate
|SaleReturn.SaleItems.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品，并更新总价，参见SaleReturn.Calculate
|SaleReturn.SaleItems.Price|在销售人员更改选定商品的价格时，系统在选择商品窗口中更改该商品的价格
|SaleReturn.SaleItems.Num|在销售人员更改选定商品的数量时，系统在选择商品窗口中更改该商品的数量
|SaleReturn.SaleItems.Remarks|在销售人员填写商品备注时，系统在选择商品窗口中更改该商品的备注
|||
|SaleReturn.Calculate|系统计算购买商品的总价
|SaleReturn.Calculate.Null|在销售任务中没有购买商品时，系统计算总价为0，并结束SaleReturn.Calculate
|SaleReturn.Calculate.Each|系统计算每项商品分项总价（商品的价格*商品的数量），并将每项商品价格相加计算总价
|SaleReturn.Calculate.Payable|系统计算折让后总额（折让前总额-销售人员输入的折让-使用代金券金额）
|||
|SaleReturn.End.Null|在销售人员未输入任何商品或未选择客户就提交销售退货单时，系统提示请填写或输入所有项，拒绝提交
|SaleReturn.End.Invalid|在销售人员提交的单据输入不符合数据格式（参见3.4.3）时，系统提示输入格式不符，拒绝提交
|SaleReturn.End.Goods|在销售人员输入一系列商品之后提交销售退货单时，系统提示提交成功，保存销售退货单并提交给总经理
|||

### 3.2.11 进货 ###
#### 3.2.11.1 特性描述 ####
在公司需要进货的条件下，销售员，能够快速准确进货；销售经理,能够快速准确进货；<br/>
总经理，能够审批进货。

<h4>3.2.11.2 刺激/响应序列</h4>
刺激：销售人员新建进货单<br>
响应：计算单据编号，系统自动生成一个进货单<br>
刺激：销售人员打开草稿单<br>
响应：系统打开草稿单，使之进入编辑状态<br>
刺激：销售人员保存草稿单<br>
响应：系统保存草稿单<br>
刺激：销售人员要求查找客户<br>
响应：系统显示客户选择界面<br>
刺激：销售人员选择客户并确认<br>
响应：系统在单据中显示客户名字，客户编号<br>
刺激：销售人员填写仓库<br>
响应：系统显示单据中仓库<br>
刺激：销售人员要求填写商品清单<br>
响应：系统显示商品选择界面<br>
刺激：销售人员从商品选择界面选择商品并确认<br>
响应：系统在单据中添加该商品，更新总额<br>
刺激：销售人员在商品选择页面中输入商品备注<br>
响应：系统显示商品备注<br>
刺激：销售人员在商品选择界面中更改商品默认单价<br>
响应：系统更改商品选择界面中商品单价<br>
刺激：销售人员在商品选择界面中更改商品默认数量<br>
响应：系统更改商品选择界面中商品数量<br>
刺激：销售人员删除已输入商品<br>
刺激：销售人员确认结束商品选择<br>
响应：系统关闭商品选择界面<br>
刺激：销售人员输入进货单备注<br>
响应：系统显示进货单备注<br>
刺激：销售人员取消进货任务<br>
响应：系统关闭进货任务<br>
刺激：销售人员提交进货单<br>
响应：系统保存进货单并提交给总经理<br>


<h4>3.2.11.3 相关功能需求</h4>
|      |   |
|-------|---|
|Stock.Start|系统应该允许销售人员新建进货单|
|Stock.Start.Valid|系统今日产生进货单的数量未超出最大额度99999，系统生成一个进货单，包括：单据编号（自动计算），客户姓名，客户编号，操作员，仓库（默认为默认仓库），商品列表，总额（默认为0），备注。出货商品清单中的内容暂时为空，包括商品的编号，名称，型号，数量，单价，金额，商品备注。
|Stock.Start.Invalid|系统计算进货单的数量超出最大额度99999，系统提示错误
||
|Stock.Open|在销售人员选择打开草稿单时，系统给出草稿单列表
|Stock.Open.Choose|销售人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
||
|Stock.Input|系统应该允许销售人员在销售任务中进行键盘输入
|Stock.Input.Save|在销售人员输入保存草稿单命令时，系统要保存草稿单
|Stock.Input.End|在销售人员输入提交进货单命令时，系统要结束一个进货任务，参见Stock.End
|Stock.Input.Cancel|在销售人员输入取消命令时，系统关闭进货任务不做任何处理
|Stock.Input.SaleItems|在销售人员输入选择商品命令时，系统执行商品清单填写任务，参见Stock.SaleItems
|Stock.Input.Client|在销售人员输入选择客户命令时，系统填写进货单中客户编号和客户姓名
|Stock.Input.Remarks|在销售人员填写备注时，系统更改进货单中备注
|||
|Stock.SaleItems|系统显示选择商品窗口
|Stock.SaleItems.Goods|在销售人员点击确认后，系统把该商品添加到商品清单，并更新总价，参见Stock.Calculate
|Stock.SaleItems.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品，并更新总价，参见Stock.Calculate
|Stock.SaleItems.Price|在销售人员更改选定商品的价格时，系统在选择商品窗口中更改该商品的价格
|Stock.SaleItems.Num|在销售人员更改选定商品的数量时，系统在选择商品窗口中更改该商品的数量
|Stock.SaleItems.Remarks|在销售人员填写商品备注时，系统在选择商品窗口中更改该商品的备注
|||
|Stock.Calculate|系统计算购买商品的总价
|Stock.Calculate.Null|在销售任务中没有购买商品时，系统计算总价为0，并结束Stock.Calculate
|Stock.Calculate.Each|系统计算每项商品分项总价（商品的价格*商品的数量），并将每项商品价格相加计算总价
|Stock.Calculate.Payable|系统计算总额
|||
|Stock.End.Null|在销售人员未输入任何商品或未选择客户就提交进货单时，系统提示请填写或输入所有项，拒绝提交
|Stock.End.Invalid|在销售人员提交的单据输入不符合数据格式（参见3.4.3）时，系统提示输入格式不符，拒绝提交
|Stock.End.Goods|在销售人员输入一系列商品之后提交进货单时，系统提示提交成功，保存进货单并提交给总经理
|||

<h3>3.2.12 进货退货</h3>
<h4>3.2.12.1特性描述</h4>
公司需要向供应商退货的时候，系统要使销售员和销售经理能够进货退货，使总经理能够审批进货退货。
<h4>3.2.12.2 刺激/响应序列</h4>
刺激：销售人员新建进货退货单<br>
响应：计算单据编号，系统自动生成一个进货退货单<br>
刺激：销售人员打开草稿单<br>
响应：系统打开草稿单，使之进入编辑状态<br>
刺激：销售人员保存草稿单<br>
响应：系统保存草稿单<br>
刺激：销售人员要求查找客户<br>
响应：系统显示客户选择界面<br>
刺激：销售人员选择客户并确认<br>
响应：系统在单据中显示客户名字，客户编号<br>
刺激：销售人员填写仓库<br>
响应：系统显示单据中仓库<br>
刺激：销售人员要求填写商品清单<br>
响应：系统显示商品选择界面<br>
刺激：销售人员从商品选择界面选择商品并确认<br>
响应：系统在单据中添加该商品，更新总额<br>
刺激：销售人员在商品选择页面中输入商品备注<br>
响应：系统显示商品备注<br>
刺激：销售人员在商品选择界面中更改商品默认单价<br>
响应：系统更改商品选择界面中商品单价<br>
刺激：销售人员在商品选择界面中更改商品默认数量<br>
响应：系统更改商品选择界面中商品数量<br>
刺激：销售人员删除已输入商品<br>
刺激：销售人员确认结束商品选择<br>
响应：系统关闭商品选择界面<br>
刺激：销售人员输入进货退货单备注<br>
响应：系统显示进货退货单备注<br>
刺激：销售人员取消进货退货任务<br>
响应：系统关闭进货退货任务<br>
刺激：销售人员提交进货退货单<br>
响应：系统保存进货退货单并提交给总经理<br>


<h4>3.2.12.3 相关功能需求</h4>
|      |   |
|-------|---|
|StockReturn.Start|系统应该允许销售人员新建进货退货单|
|StockReturn.Start.Valid|系统今日产生进货退货单的数量未超出最大额度99999，系统生成一个进货退货单，包括：单据编号（自动计算），客户姓名，客户编号，操作员，仓库（默认为默认仓库），商品列表，总额（默认为0），备注。出货商品清单中的内容暂时为空，包括商品的编号，名称，型号，数量，单价，金额，商品备注。
|StockReturn.Start.Invalid|系统计算进货退货单的数量超出最大额度99999，系统提示错误
||
|StockReturn.Open|在销售人员选择打开草稿单时，系统给出草稿单列表
|StockReturn.Open.Choose|销售人员选择一个草稿单打开时，系统打开草稿单使之进入编辑状态
||
|StockReturn.Input|系统应该允许销售人员在销售任务中进行键盘输入
|StockReturn.Input.Save|在销售人员输入保存草稿单命令时，系统要保存草稿单
|StockReturn.Input.End|在销售人员输入提交进货退货单命令时，系统要结束一个进货退货任务，参见StockReturn.End
|StockReturn.Input.Cancel|在销售人员输入取消命令时，系统关闭进货退货任务不做任何处理
|StockReturn.Input.SaleItems|在销售人员输入选择商品命令时，系统执行商品清单填写任务，参见StockReturn.SaleItems
|StockReturn.Input.Client|在销售人员输入选择客户命令时，系统填写进货退货单中客户编号和客户姓名
|StockReturn.Input.Remarks|在销售人员填写备注时，系统更改进货退货单中备注
|||
|StockReturn.SaleItems|系统显示选择商品窗口
|StockReturn.SaleItems.Goods|在销售人员点击确认后，系统把该商品添加到商品清单，并更新总价，参见StockReturn.Calculate
|StockReturn.SaleItems.Del|在销售人员删除商品列表中选定的商品时，系统在商品清单中删除该商品，并更新总价，参见StockReturn.Calculate
|StockReturn.SaleItems.Price|在销售人员更改选定商品的价格时，系统在选择商品窗口中更改该商品的价格
|StockReturn.SaleItems.Num|在销售人员更改选定商品的数量时，系统在选择商品窗口中更改该商品的数量
|StockReturn.SaleItems.Remarks|在销售人员填写商品备注时，系统在选择商品窗口中更改该商品的备注
|||
|StockReturn.Calculate|系统计算购买商品的总价
|StockReturn.Calculate.Null|在销售任务中没有购买商品时，系统计算总价为0，并结束StockReturn.Calculate
|StockReturn.Calculate.Each|系统计算每项商品分项总价（商品的价格*商品的数量），并将每项商品价格相加计算总价
|StockReturn.Calculate.Payable|系统计算总额
|||
|StockReturn.End.Null|在销售人员未输入任何商品或未选择客户就提交进货退货单时，系统提示请填写或输入所有项，拒绝提交
|StockReturn.End.Invalid|在销售人员提交的单据输入不符合数据格式（参见3.4.3）时，系统提示输入格式不符，拒绝提交
|StockReturn.End.Goods|在销售人员输入一系列商品之后提交进货退货单时，系统提示提交成功，保存进货退货单并提交给总经理
|||


<h3>3.2.15客户管理</h3>
<h4>3.2.15.1 特性描述</h4>
在销售人员需要管理客户信息的情况下，系统要使销售员和销售经理能够管理客户的信息。
<h4>3.2.15.2 刺激/响应序列</h4>
刺激：销售人员输入客户属性<br/>
响应：系统显示客户信息<br/>
刺激：销售人员完成输入<br/>
响应：系统更新客户信息<br/>
<h4>3.2.15.3 相关功能需求</h4>

方法名 | 交互过程
---|---
Client.Add|销售人员选择增加客户,系统提示销售人员输入增加的客户信息
Client.Add.Input|销售人员输入新客户属性，包括分类（进货商、销售商）、级别（五级，一级普通用户，五级VIP客户）、姓名、电话（默认为无）、地址（默认为无）、邮编（默认为无）、电子邮箱（默认为无）、应收额度（默认为0）、默认业务员（默认为无）。系统显示（输出）新客户信息，客户的属性有：编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员
Client.Add.End|销售人员结束输入，系统处理结束增加客户任务
Client.Add.End.Valid|若销售人员未输入客户的名称、级别、分类，系统提示请输入客户的必要信息
Client.Add.End.Invalid|若销售人员已输入客户的名称、级别、分类，系统保存客户信息并结束增加客户任务
Client.Find|销售人员输入客户名称或编号查找用户，系统显示所查找客户信息
Client.Find.NotFound|输入的名称或编号不存在，系统提示没有该客户
Client.Find.Delete|销售人员选择删除某客户, 系统删除该客户信息
Client.Find.Change|销售人员编辑客户属性，系统保存客户新信息
Client.Change.ReceiveLimit|销售人员选择修改客户应收额度，系统处理修改应收额度操作。参见Client.ReceiveLimit
Client.ReceiveLimit.Low|若操作员无最高权限，系统提示权限不足，应收额度仅限最高权限修改
Client.ReceiveLimit.High|若操作员有最高权限，系统修改应收额度并保存

    
3.2.16查看销售明细表  
  
3.2.16.1，特性描述：财务人员或总经理可以查看销售明细表。  
    优先级=低  
3.2.16.2，刺激-响应序列：  
刺激：总经理或财务人员根据时间、客户、商品名筛选表单（若不设置筛选条件默认显示全部）  
响应：系统返回筛选后的表单列表  
刺激：总经理或财务人员选择要查看的表单  
响应：系统返回表单的具体数据信息，包括商品名，型号，数量，单价，总额，时间区间。  
刺激：总经理或财务人员选择导出某表单的Excel  
响应：系统生成Excel表  
   
  
3.2.16.3   

| 需求 |规格说明  |
|------
|CheckS.Choose|总经理或财务人员选择筛选条件并筛选表单，系统返回筛选后的表单列表
|CheckS.Open|总经理或财务人员选择打开某个表单，系统返回表单信息，包括商品名，型号，数量，单价，总额，时间区间
|CheckS.Excel|总经理或财务人员选择导出某个表达的Excel，系统自动生成Excel文件
|CheckS.End|总经理或财务人员结束查看操作，系统关闭查看任务  
 
  
3.2.17，查看经营情况表  
  
3.2.17.1，特性描述：财务人员或总经理可以查看经营情况表。  
    优先级=低  
3.2.17.2，刺激-响应序列：  
刺激：总经理或财务人员打开某个经营情况表  
响应：系统返回该表单全部信息  
刺激：总经理或财务人员筛选要查看的信息，分为收入类、支出类、利润  
响应：系统返回表单的具体数据信息，格式详见用例文档。  
刺激：总经理或财务人员选择导出某表单的Excel  
响应：系统生成Excel表  
  
3.2.17.3  

   
| 需求 |规格说明  |
|------
|CheckMS.Choose|总经理或财务人员选择筛选条件并筛选信息，系统返回筛选后的信息
|CheckMS.Open|总经理或财务人员选择打开某个表单，系统返回表单信息的全部信息。（具体格式见用例文档）
|CheckMS.Excel|总经理或财务人员选择导出某个表达的Excel，系统自动生成Excel文件
|CheckMS.End|总经理或财务人员结束查看操作，系统关闭查看任务  
  
<h4>3.2.19  审批单据</h4>

<h5>3.2.19.1 特性描述</h5>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;公司有未审批单据生成，经过识别和授权的总经理进行单据的审批工作。

<h5>3.2.19.2 刺激／响应序列</h5>

刺激：总经理选择单据  
响应：系统显示单据信息  
刺激：总经理审批通过  
响应：系统保存通过信息，进行相应操作，通知相应人员。  
刺激：总经理修改单据信息  
响应：系统保存修改  
刺激：总经理审批不通过  
响应：系统保存信息，并通知相应人员该单据未通过审批  


<h5>3.2.19.3 相关功能需求</h5>

编号|需求描述
--|--
Check.open|在总经理选择单据后，系统显示该单据信息
Check.Modify|在总经理修改单据后，系统更新单据信息
|
Check.Approve|在总经理审批通过时，系统根据不同单据进行不同操作
Check.Approve.StockBill|系统将进货单状态设为通过，更改库存数量，最近进价，客户的应付数据，将进货单信息发送给库存管理人员，让他完成现实中的进货
Check.Approve.StockReturnBill|系统检查进货退货单中每个商品的数量是否大于等于库存中该商品的数量，若不是，则提示总经理库存不足，拒绝进货退货单审批通过。<br>系统将进货退货单状态设为通过，更改库存数量，修改客户的应收数据，将进货退货单发送给库存管理人员，让他完成现实中的出货
Check.Approve.SaleBill|系统检查销售单中每个商品的数量是否大于等于库存中该商品的数量，若不是，则提示总经理库存不足，拒绝销售单审批通过。<br>系统计算客户的应收=折让后总价－使用代金劵（若折让后总价小于使用代金劵，则应收为0），检查此次销售后该用户的应收是否在应收额度内，若不在，则提示总经理超过应收额度，拒绝销售单审批通过。<br>系统将销售单状态设为通过，更改库存数量，最近零售价，修改客户的应收数据，将销售单信息发送给库存管理人员，让他完成现实中的出货。<br>若有赠品，系统自动生成库存赠送单，包括：单据编号（自动计算），该销售单的编号及链接（点击可以查看销售单信息），客户，赠品列表。赠品列表包括：赠品名称，数量。并将库存赠送单信息保存，提交给总经理<br>若有代金劵，系统通知销售人员完成现实中代金劵的赠送<br>
Check.Approve.SaleReturnBill|系统将销售退货单状态设为通过，更改库存数量，修改客户的应付数据，将销售退货单发送给库存管理人员，让他完成现实中的出货
Check.Approve.ReceiveBill|系统将收款单状态设为通过，更改账户余额，客户的应收数据，并通知财务人员完成现实中银行账户的操作
Check.Approve.PaymentBill|系统将付款单状态设为通过，更改账户余额，客户的应付数据，并通知财务人员完成现实中银行账户的操作
Check.Approve.CashFareBill|系统将现金费用单状态设为通过，更改账户余额，并通知财务人员完成现实中银行账户的操作
Check.Approve.PresentBill|系统检查库存赠送单中每个商品的数量是否大于等于库存中该商品的数量，若不是，则提示总经理库存不足，拒绝库存赠送单审批通过。<br>系统将库存赠送单状态设为通过，更改库存数量，将库存赠送单信息发送给库存管理人员，让他完成现实中的库存赠送。<br>
Check.Approve.StockOverflowBill|系统将库存报溢单状态设为通过，修改库存数量
Check.Approve.StockLackBill|系统将库存报损单状态设为通过，修改库存数量
|
Check.Disapprove|在总经理审批不通过时，系统根据不同单据进行不同操作
Check.Disapprove.StockBill|系统将进货单状态设为不通过，并通知销售人员
Check.Disapprove.StockReturnBill|系统将进货退货单状态设为不通过，并通知销售人员
Check.Disapprove.SaleBill|系统将销售单状态设为不通过，并通知销售人员
Check.Disapprove.SaleReturnBill|系统将销售退货单状态设为不通过，并通知销售人员
Check.Disapprove.ReceiveBill|系统将收款单状态设为不通过，并通知财务人员
Check.Disapprove.PaymentBill|系统将付款单状态设为不通过，并通知财务人员
Check.Disapprove.CashFareBill|系统将现金费用单状态设为不通过，并通知财务人员
Check.Disapprove.PresentBill|系统将库存赠送单状态设为不通过，并通知销售人员？（TBD）
Check.Disapprove.StockOverflowBill|系统将库存报溢单状态设为不通过，并通知库存管理人员
Check.Disapprove.StockLackBill|系统将库存报损单状态设为不通过，并通知库存管理人员
|
Check.BatchProcessing|系统应该允许总经理批量处理单据
Check.BatchProcessing.Select|在总经理勾选多个单据后，系统应将勾选的单据标记
Check.BatchProcessing.Approve|在总经理点通过审批后，系统应将已标记的所有单据通过审批，并逐一进行处理。参见Check.Approve
Check.BatchProcessing.Approve.Deny|若总经理没有勾选单据就点通过审批，系统拒绝处理，提示未勾选单据
Check.BatchProcessing.Disapprove|在总经理点拒绝通过审批后，系统应将已标记的所有单据不通过审批，并逐一进行处理。参见Check.Disapprove
Check.BatchProcessing.Disapprove.Deny|若总经理没有勾选单据就点拒绝通过审批，系统拒绝处理，提示未勾选单据  
  
### 3.2.20 库存修正(库存报溢报损)
#### 3.2.20.1 特性描述
使库存管理人员修正系统中库存数量，使其与实际库房中商品数量一致<br/>
#### 3.2.20.2 刺激/响应序列
刺激：库存管理员请求新建库存报溢单<br/>
响应：系统生成库存报溢单，包括：单据编号（自动生成），报溢列表，操作员。其中报溢列表包括：商品名称，实际库存数量，系统中数量，报溢数量，备注<br/> 
刺激：库存管理员输入商品编号或名称<br/>
响应：系统显示商品名称，编号，系统中库存数量<br/>
刺激：库存管理员填写实际库存数量<br/>
响应：系统计算报溢数量<br/>
刺激：库存管理员提交报溢单<br/>
响应：系统保存库存报溢单并提交并记录操作日志<br/> 
刺激：库存管理员请求新建库存报损单<br/>
响应：系统生成库存报损单，包括：单据编号（自动生成），报损列表，操作员。其中报损列表包括：商品名称，实际库存数量，系统中数量，报损数量，备注<br/>
刺激：库存管理员输入商品编号或名称<br/>
响应：系统显示商品名称，编号，系统中库存数量<br/> 
刺激：库存管理员填写实际库存数量<br/>
响应：系统计算报损数量<br/>
刺激：库存管理员提交报损单<br/>
响应：系统保存库存报损单并提交并记录操作日志<br/>
刺激：管理员保存单据，使之进入草稿状态<br/>
响应：系统保存单据，并更改单据状态为草稿状态<br/>
#### 3.2.20.3 相关功能需求

方法名 | 交互过程
---|---
CorrectStock.New.StockOverflowList | 在库存管理员新建库存报溢单时，系统生成库存报溢单，包括：单据编号（自动生成），报溢列表，操作员。其中报溢列表包括：商品名称，实际库存数量，系统中数量，报溢数量，备注 
CorrectStock.InputGoods | 库存管理员输入商品编号或名称时，系统显示商品名称，编号，系统中库存数量
CorrectStock.InputFackStockNum | 库存管理员填写实际库存数量时，系统计算数量 
CorrectStock.submitStockOverflowList | 库存管理员提交报溢单时，系统保存库存报溢单并提交并记录操作日志
CorrectStock.New.StockLessList | 库存管理员请求新建库存报损单时，系统生成库存报损单，包括：单据编号（自动生成），报损列表，操作员。其中报损列表包括：商品名称，实际库存数量，系统中数量，报损数量，备注
CorrectStock.saveList | 管理员保存单据时，系统修改单据状态为草稿状态
CorrectStock.GoodsNotExist | 在管理员输入的商品编号或名称不存在时，系统提示该商品不存在
CorrectStock.checkInputNumOverFlow | 输入的实际库存数量小于等于系统中数量时，系统提示检查输入数量 
CorrectStock.checkInputNumLess | 输入的实际库存数量大于等于系统中数量时，系统提示检查输入数量 

### 3.2.21 库存赠送
#### 3.2.21.1 特性描述
使库存管理人员完成库存赠送操作。使总经理审批库存赠送单

#### 3.2.21.2 刺激/响应序列
刺激：在销售过程中，客户满足了某项受赠条件<br/>
响应：系统自动生成库存赠送单并记录操作日志<br/>
刺激：库存赠送单审核通过并记录操作日志<br/>
响应：系统向库存管理人员发送出货消息，调整系统库存并打印库存赠送单<br/>
刺激：单据审批失败<br/>
响应：系统向销售人员发送审批失败消息并记录操作日志<br/>

#### 3.2.21.3 相关功能需求
方法名 |交互过程
---|---
StockGift.New.stockGiftList | 在销售过程中，客户满足了某项受赠条件时，系统自动生成库存赠送单并记录操作日志
StockGift.sendGoodsSuccMessage | 库存赠送单审核通过时，系统向库存管理人员发送出货消息，调整系统库存并打印库存赠送单并记录操作日志
StockGift.sendGoodsFailMessage | 单据审批失败时，系统向销售人员发送审批失败消息并记录操作日志


<h2>3.3 非功能需求</h2>

<h3>3.3.1 安全性</h3>

<h4>3.3.1.1登录</h4>

<h5>3.3.1.1.1特性描述</h5>
为了保证所有使用本系统的用户的信息安全，维护用户的隐私权，所有用户在使用系统提供的一切功能之前，需要凭借独有的标识和标识对应的密码进行登陆，进行身份验证和权限配置。

<h5>3.3.1.1.2刺激/响应序列</h5>
刺激：用户通过入口进入系统<br/>
响应：系统显示登陆界面<br/>
刺激：用户输入用户名和密码，发出登陆请求<br/>
响应：系统对用户的登陆信息进行验证，如果用户名存在且和密码匹配，则登陆成功，进入该用户的操作初始界面，否则提示用户登陆失败。<br/>

<h5>3.3.1.1.3详细描述</h5>

方法名 | 交互过程
---|---
Safe.Login|系统应该要求用户登录，进行身份验证
Safe.Cancel|当用户取消登录时，退出系统
Safe.Del|系统应该允许用户删除已经输入的信息
Safe.Login.NoUser|当用户输入的用户名不存在时，系统提示登录失败
Safe.Login.Incompitable|当用户输入的用户名和密码不匹配时，系统提示登录失败 
Safe.Login.Null|当用户名或密码空缺时，系统提示空缺，要求补全
Safe.Login.Invalid|当用户输入了非法字符的时候，系统提示输入非法 
Safe.Login.Success|当用户的用户名和密码匹配时，登录成功，跳转到用户相应的初始界面
Safe.Login.Fail|登录失败，参见Safe.Login.NoUser，Safe.Login.InCompiable

<h4>3.3.1.2修改密码</h4>

<h5>3.3.1.2.1特性描述</h5>
一个已经经过验证的用户有权利修改个人密码，以保证信息安全。

<h5>3.3.1.2.2刺激/响应序列</h5>
刺激：用户发出修改密码请求<br/>
响应：系统显示修改密码界面，提示用户输入旧密码和新密码（两遍）<br/>
刺激：用户输入旧密码和新密码，请求修改密码<br/>
响应：系统对用户名和密码再次验证，若匹配并且两个新密码相同，则提示修改成功，并存储。<br/>
刺激：用户输入错误的修密码<br/>
响应：系统提示旧密码错误<br/>
刺激：用户输入的两个新密码不相同<br/>
响应：系统提示两次输入不匹配，请用户重新输入<br/>
刺激：用户输入的密码格式错误<br/>
响应：系统提示密码格式错误，提示修改<br/>

<h5>3.3.1.1.3详细描述 </h5>

方法名 | 交互过程
---|---
Safe.ChangePW|系统应该允许用户修改密码
Safe.ChangePW.Start|当用户发出修改密码请求时，系统进入修改密码界面
Safe.ChangePW.Cancel|当用户取消修改密码时，系统不做任何数据处理，返回初始界面
Safe.ChangePW.FalseOld|当用户输入错误的旧密码是，系统提示旧密码错误
Safe.ChangePW.NewDiff|当用户输入的新密码不相同时，系统提示两次输入不同，提示用户检查
Safe.ChangePW.Null|当用户的输入有空缺时，系统提示空缺，要求补全
Safe.ChangePW.Success|当用户旧密码正确且新密码一致时，提示修改成功
Safe.ChangePW.Invalid|当用户输入字符格式非法时，提示错误要求重新输入

<h3>3.3.2可维护性</h3>
Modifiability1: 在系统的账户、商品、进货单、进货退货单、销售出货单、销售退货单、现金费用单编号数据格式发生变化时(见Format)，系统要能够在3人2天内完成。<br/>
Modifiability2: 如果系统需要扩展将收支数据进行图形化显示，要能够在1个人月内完成。<br/>
Modifiability3: 如果需要扩展新的部门人员(比如销售员，库存管理人员)及其职能，要能够在0.5个人月内完成<br/>

<h3>3.3.3易用性</h3>
Usability1: 对用户的平均培训时间不能超过2小时<br/>
Usability2: 在进货单信息、进货退货单、销售出货单，销售退货单，付款单，收款单现金费用单内容变化时，系统可以在5分钟以内更新，保证消息的及时性。<br/>

<h3>3.3.4可靠性</h3>
Reliability1: 当50以内的人同时在线时，系统不崩溃。<br/>
Reliability2: 系统崩溃后，已更新保存的数据不会丢失。<br/>
Reliability3: 在客户端与服务器通信时，如果网络故障，系统不能出现故障。<br/>
Reliability3.1: 客户端应该检测到故障，并尝试重新连接服务器3次，每次15秒。<br/>
Reliability3.1.1如果重新连接不成功，客户端报警。<br/>

### 3.3.5 业务规则
**BR1**：适用（商品标识，参照日期）的商品赠送促销策略<br/>
（促销商品标识=商品标识）<br/> 而且（（开始日期早于等于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR2**：适用（额度，参照日期）的总额赠送促销策略<br/>
（促销额度<=额度）而且（（开始日期早于等于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR3**：适用（商品标识，参照日期）的商品特价促销策略<br/>
（促销商品标识=商品标识）<br/> 而且（（开始日期早于晚于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR4**：适用（额度，参照日期）的总额特价促销策略<br/>
（促销额度<=额度）而且（不存在：本促销额度<另一个促销额度<=额度）<br/> 而且（（开始日期早于等于参照日期）并且（结束日期晚于等于参照日期））<br/>
**BR5**：积分兑换规则，该规则可能变化<br/>
50积分=1元RMB<br/>
**BR6**：退货日期约定<br/>
今天-销售日期>=15天<br/>
**BR7**：在参照日期时退货的赠品差<br/>
Pre=销售记录的普通商品总价-以前退货记录的普通商品总价之和<br/>
Post=Pre-本次退货记录的普通商品总价<br/>
Pre赠品=适用于（Pre，参照日期）的总额赠送策略（参见BR2）的赠送商品及数量<br/>
Post赠品=适用于（Post，参照日期）的总额赠送策略（参见BR2）的赠送商品及数量
赠品差=Pre赠品-Post赠品<br/>
**BR8**：在参照日期时退货的账款差<br/>
Pre=销售记录的普通商品总价-以前退货记录的普通商品总价之和<br/>
Post=Pre-本次退货记录的普通商品总价<br/>
Pre折扣率=适用于（Pre，参照日期）的总额赠送策略（参见BR4）的折扣率<br/>
如果无适用的总额赠送策略：Pre折扣率=100%<br/>
Post折扣率=适用于（Post，参照日期）总额赠送策略（参见BR4）的折扣率<br/>
如果无适用的总额赠送策略：Post折扣率=100%<br/>
账款差=Pre×Pre折扣率-Post×Post折扣率<br/>
**BR9**：礼品赠送规则，积分数额档可能发生变化<br/>
如果会员的出生日期是当天，触发“生日”礼品赠送事件<br/>
在会员积分数额初次超档时，触发“积分”礼品赠送事件<br/>
积分数额档初始为1000、2000、5000，此后每增加5000为一档. <br/>
多个礼品赠送事件可以同时发生<br/>
每个会员由其所注册的店铺进行礼品赠送服务<br/>
**BR10**：一个商品赠送策略存在重复的判定规则<br/>
S1为指定的商品赠送策略<br/>
S2为其他的商品赠送策略<br/>
如果存在满足下列条件的S2，则指定商品赠送策略存在重复：<br/>
(S1.促销商品标识=S2.促销商品标识 并且 S1.赠品标识=S2.赠品标识) 并且<br/>
((S1.开始日期早于等于S2的结束日期<br/> 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期<br/> 并且 S2.开始日期晚于等于S1的开始日期））<br/>
**BR11**：一个商品特价策略存在重复的判定规则<br/>
S1为指定的商品特价策略<br/>
S2为其他的商品特价策略<br/>
如果存在满足下列条件的S2，则指定商品特价策略存在重复：<br/>
(S1.促销商品标识=S2.促销商品标识) 并且
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））<br/>
**BR12**：一个总额赠送策略存在重复的判定规则<br/>
S1为指定的总额赠送策略<br/>
S2为其他的总额赠送策略<br/>
如果存在满足下列条件的S2，则指定总额赠送策略存在重复：<br/>
(|S1.额度-S2.额度|<50 并且<br/> S1.赠品标识=S2.赠品标识) 并且<br/>
((S1.开始日期早于等于S2的结束日期<br/> 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期<br/> 并且 S2.开始日期晚于等于S1的开始日期））<br/>
**BR13**：一个总额特价策略存在重复的判定规则<br/>
S1为指定的总额特价策略<br/>
S2为其他的总额特价策略<br/>
如果存在满足下列条件的S2，则指定总额特价策略存在重复：<br/>
(|S1.额度-S2.额度|<30) 并且<br/>
((S1.开始日期早于等于S2的结束日期<br/> 并且 S1.开始日期晚于等于S2的开始日期) 或者<br/>
（S2.开始日期早于等于S1的结束日期<br/> 并且 S2.开始日期晚于等于S1的开始日期））<br/>

### 3.3.6 约束
IC1：在开发过程中缺少可以的打印机，需要使用文件系统模拟打印机。<br/>
IC2：系统要在网络上分布为一个服务器和多个客户端。<br/>

## 3.4 数据需求

### 3.4.1 数据定义
DR1: 库存单据、出入库记录、进货单据、进货退货单据、销售记录、统计分析数据、收付款单记录、单据审批记录、系统日志需要保存2年。<br/>
DR2: 财务单据的修改和删除采用红冲和红冲并复制策略。<br/>
DR3: 数据要每隔2周备份一次。<br/>

### 3.4.2 默认数据
默认数据用于<br/>
- 系统中新增加数据时<br/>
- 编辑数据时不小心将相关内容清空<br/>

Default1：商品的数量默认为1<br/>
Default2：费用或价格的数据默认为0<br/>
Default3：用户的默认身份为销售人员<br/>
Default4：时间默认为当天<br/>
Default5：操作人员工号默认为当前登录用户<br/>
Default6：商品出库原因默认为到期报废<br/>
Default7:使用代金券金额默认为0<br/>
Default8:折让默认为0<br/>

<h3>3.4.3 数据格式要求</h3>
Format01：库存赠送单单据编号格式为KCZSD、-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format02：库存报溢单单据编号格式为KCBYD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format03：库存报损单单据编号格式为KCBSD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format04：库存报警单单据编号格式为KCBJD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format05：进货单单据编号格式为JHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format06：进货退货单单据编号格式为JHTHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format07：销售单单据编号格式为XSD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format08：销售退货单单据编号格式为XSTHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format09：收款单单据编号格式为SKD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format10：付款单单据编号格式为FKD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format11：现金费用单单据编号格式为XJFYD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>
Format12：商品编号格式为PRO-xxxx-yyyy，xxxx表示分类id，yyyy每天从1开始编号<br/>
Format13：客户编号格式：TBD<br/>
Format14：价格和费用的格式必须是：大于等于0、精确到小数点后2位的浮点数，单位为RMB<br/>
Format15：日期的格式必须是：yyyyMMdd<br/>
Format16：数量的格式必须是：正整数<br/>

<h2>3.5 其他要求</h5>
系统主要操作都有日志进行记录，并对经理和财务人员提供查询功能。
主要操作包括：库存赠送，库存报溢，库存报损，库存报警，进货，进货退货，销售，销售退货，付款，收款，处理现金费用，审批单据







